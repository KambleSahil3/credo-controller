diff --git a/node_modules/@credo-ts/core/build/agent/Agent.js b/node_modules/@credo-ts/core/build/agent/Agent.js
index d0a26e8..c80ba74 100644
--- a/node_modules/@credo-ts/core/build/agent/Agent.js
+++ b/node_modules/@credo-ts/core/build/agent/Agent.js
@@ -112,6 +112,7 @@ class Agent extends BaseAgent_1.BaseAgent {
             .receiveMessage(e.payload.message, {
             connection: e.payload.connection,
             contextCorrelationId: e.payload.contextCorrelationId,
+            receivedAt: e.payload.receivedAt,
         })
             .catch((error) => {
             this.logger.error('Failed to process message', { error });
diff --git a/node_modules/@credo-ts/core/build/agent/Agent.js.map b/node_modules/@credo-ts/core/build/agent/Agent.js.map
index 4899ecb..51c0f0e 100644
--- a/node_modules/@credo-ts/core/build/agent/Agent.js.map
+++ b/node_modules/@credo-ts/core/build/agent/Agent.js.map
@@ -1 +1 @@
-{"version":3,"file":"Agent.js","sourceRoot":"","sources":["../../src/agent/Agent.ts"],"names":[],"mappings":"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"}
\ No newline at end of file
+{"version":3,"file":"Agent.js","sourceRoot":"","sources":["../../src/agent/Agent.ts"],"names":[],"mappings":"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"}
\ No newline at end of file
diff --git a/node_modules/@credo-ts/core/build/agent/Dispatcher.js b/node_modules/@credo-ts/core/build/agent/Dispatcher.js
index 66d8a6b..c1cea4d 100644
--- a/node_modules/@credo-ts/core/build/agent/Dispatcher.js
+++ b/node_modules/@credo-ts/core/build/agent/Dispatcher.js
@@ -87,6 +87,7 @@ let Dispatcher = class Dispatcher {
             payload: {
                 message,
                 connection,
+                receivedAt: messageContext.receivedAt,
             },
         });
     }
diff --git a/node_modules/@credo-ts/core/build/agent/Dispatcher.js.map b/node_modules/@credo-ts/core/build/agent/Dispatcher.js.map
index cfab13a..af98bfa 100644
--- a/node_modules/@credo-ts/core/build/agent/Dispatcher.js.map
+++ b/node_modules/@credo-ts/core/build/agent/Dispatcher.js.map
@@ -1 +1 @@
-{"version":3,"file":"Dispatcher.js","sourceRoot":"","sources":["../../src/agent/Dispatcher.ts"],"names":[],"mappings":"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"}
\ No newline at end of file
+{"version":3,"file":"Dispatcher.js","sourceRoot":"","sources":["../../src/agent/Dispatcher.ts"],"names":[],"mappings":"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"}
\ No newline at end of file
diff --git a/node_modules/@credo-ts/core/build/agent/EnvelopeService.js b/node_modules/@credo-ts/core/build/agent/EnvelopeService.js
index 0238d59..12261a9 100644
--- a/node_modules/@credo-ts/core/build/agent/EnvelopeService.js
+++ b/node_modules/@credo-ts/core/build/agent/EnvelopeService.js
@@ -32,14 +32,12 @@ let EnvelopeService = class EnvelopeService {
         let encryptedMessage = await agentContext.wallet.pack(message, recipientKeysBase58, senderKeyBase58 !== null && senderKeyBase58 !== void 0 ? senderKeyBase58 : undefined);
         // If the message has routing keys (mediator) pack for each mediator
         for (const routingKeyBase58 of routingKeysBase58) {
-            console.log(`message['@type']`, JSON.stringify(message['@type']))
             const forwardMessage = new messages_1.ForwardMessage({
                 // Forward to first recipient key
                 to: recipientKeysBase58[0],
                 message: encryptedMessage,
             });
             recipientKeysBase58 = [routingKeyBase58];
-            forwardMessage["messageType"] = message['@type'];
             this.logger.debug('Forward message created', forwardMessage);
             const forwardJson = forwardMessage.toJSON({
                 useDidSovPrefixWhereAllowed: agentContext.config.useDidSovPrefixWhereAllowed,
diff --git a/node_modules/@credo-ts/core/build/agent/Events.d.ts b/node_modules/@credo-ts/core/build/agent/Events.d.ts
index 1df8984..24f2b78 100644
--- a/node_modules/@credo-ts/core/build/agent/Events.d.ts
+++ b/node_modules/@credo-ts/core/build/agent/Events.d.ts
@@ -22,6 +22,7 @@ export interface AgentMessageReceivedEvent extends BaseEvent {
         message: unknown;
         connection?: ConnectionRecord;
         contextCorrelationId?: string;
+        receivedAt?: Date;
     };
 }
 export interface AgentMessageProcessedEvent extends BaseEvent {
@@ -29,6 +30,7 @@ export interface AgentMessageProcessedEvent extends BaseEvent {
     payload: {
         message: AgentMessage;
         connection?: ConnectionRecord;
+        receivedAt?: Date;
     };
 }
 export interface AgentMessageSentEvent extends BaseEvent {
diff --git a/node_modules/@credo-ts/core/build/agent/MessageReceiver.d.ts b/node_modules/@credo-ts/core/build/agent/MessageReceiver.d.ts
index 80f3761..35cae42 100644
--- a/node_modules/@credo-ts/core/build/agent/MessageReceiver.d.ts
+++ b/node_modules/@credo-ts/core/build/agent/MessageReceiver.d.ts
@@ -29,10 +29,11 @@ export declare class MessageReceiver {
      *
      * @param inboundMessage the message to receive and handle
      */
-    receiveMessage(inboundMessage: unknown, { session, connection, contextCorrelationId, }?: {
+    receiveMessage(inboundMessage: unknown, { session, connection, contextCorrelationId, receivedAt, }?: {
         session?: TransportSession;
         connection?: ConnectionRecord;
         contextCorrelationId?: string;
+        receivedAt?: Date;
     }): Promise<void>;
     private receivePlaintextMessage;
     private receiveEncryptedMessage;
diff --git a/node_modules/@credo-ts/core/build/agent/MessageReceiver.js b/node_modules/@credo-ts/core/build/agent/MessageReceiver.js
index e74b6dd..e351edf 100644
--- a/node_modules/@credo-ts/core/build/agent/MessageReceiver.js
+++ b/node_modules/@credo-ts/core/build/agent/MessageReceiver.js
@@ -56,7 +56,7 @@ let MessageReceiver = class MessageReceiver {
      *
      * @param inboundMessage the message to receive and handle
      */
-    async receiveMessage(inboundMessage, { session, connection, contextCorrelationId, } = {}) {
+    async receiveMessage(inboundMessage, { session, connection, contextCorrelationId, receivedAt, } = {}) {
         this.logger.debug(`Agent received message`);
         // Find agent context for the inbound message
         const agentContext = await this.agentContextProvider.getContextForInboundMessage(inboundMessage, {
@@ -64,10 +64,10 @@ let MessageReceiver = class MessageReceiver {
         });
         try {
             if (this.isEncryptedMessage(inboundMessage)) {
-                await this.receiveEncryptedMessage(agentContext, inboundMessage, session);
+                await this.receiveEncryptedMessage(agentContext, inboundMessage, session, receivedAt);
             }
             else if (this.isPlaintextMessage(inboundMessage)) {
-                await this.receivePlaintextMessage(agentContext, inboundMessage, connection);
+                await this.receivePlaintextMessage(agentContext, inboundMessage, connection, receivedAt);
             }
             else {
                 throw new error_1.CredoError('Unable to parse incoming message: unrecognized format');
@@ -78,12 +78,12 @@ let MessageReceiver = class MessageReceiver {
             await agentContext.endSession();
         }
     }
-    async receivePlaintextMessage(agentContext, plaintextMessage, connection) {
+    async receivePlaintextMessage(agentContext, plaintextMessage, connection, receivedAt) {
         const message = await this.transformAndValidate(agentContext, plaintextMessage);
-        const messageContext = new models_1.InboundMessageContext(message, { connection, agentContext });
+        const messageContext = new models_1.InboundMessageContext(message, { connection, agentContext, receivedAt });
         await this.dispatcher.dispatch(messageContext);
     }
-    async receiveEncryptedMessage(agentContext, encryptedMessage, session) {
+    async receiveEncryptedMessage(agentContext, encryptedMessage, session, receivedAt) {
         const decryptedMessage = await this.decryptMessage(agentContext, encryptedMessage);
         const { plaintextMessage, senderKey, recipientKey } = decryptedMessage;
         this.logger.info(`Received message with type '${plaintextMessage['@type']}', recipient key ${recipientKey === null || recipientKey === void 0 ? void 0 : recipientKey.fingerprint} and sender key ${senderKey === null || senderKey === void 0 ? void 0 : senderKey.fingerprint}`, plaintextMessage);
@@ -97,6 +97,7 @@ let MessageReceiver = class MessageReceiver {
             senderKey,
             recipientKey,
             agentContext,
+            receivedAt,
         });
         // We want to save a session if there is a chance of returning outbound message via inbound transport.
         // That can happen when inbound message has `return_route` set to `all` or `thread`.
diff --git a/node_modules/@credo-ts/core/build/agent/MessageReceiver.js.map b/node_modules/@credo-ts/core/build/agent/MessageReceiver.js.map
index 6fd94b7..81627e1 100644
--- a/node_modules/@credo-ts/core/build/agent/MessageReceiver.js.map
+++ b/node_modules/@credo-ts/core/build/agent/MessageReceiver.js.map
@@ -1 +1 @@
-{"version":3,"file":"MessageReceiver.js","sourceRoot":"","sources":["../../src/agent/MessageReceiver.ts"],"names":[],"mappings":"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"}
\ No newline at end of file
+{"version":3,"file":"MessageReceiver.js","sourceRoot":"","sources":["../../src/agent/MessageReceiver.ts"],"names":[],"mappings":"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"}
\ No newline at end of file
diff --git a/node_modules/@credo-ts/core/build/agent/models/InboundMessageContext.d.ts b/node_modules/@credo-ts/core/build/agent/models/InboundMessageContext.d.ts
index 36f4c4b..5b0e3a3 100644
--- a/node_modules/@credo-ts/core/build/agent/models/InboundMessageContext.d.ts
+++ b/node_modules/@credo-ts/core/build/agent/models/InboundMessageContext.d.ts
@@ -8,6 +8,7 @@ export interface MessageContextParams {
     senderKey?: Key;
     recipientKey?: Key;
     agentContext: AgentContext;
+    receivedAt?: Date;
 }
 export declare class InboundMessageContext<T extends AgentMessage = AgentMessage> {
     message: T;
@@ -15,6 +16,7 @@ export declare class InboundMessageContext<T extends AgentMessage = AgentMessage
     sessionId?: string;
     senderKey?: Key;
     recipientKey?: Key;
+    receivedAt: Date;
     readonly agentContext: AgentContext;
     constructor(message: T, context: MessageContextParams);
     /**
diff --git a/node_modules/@credo-ts/core/build/agent/models/InboundMessageContext.js b/node_modules/@credo-ts/core/build/agent/models/InboundMessageContext.js
index a592252..ec84ea1 100644
--- a/node_modules/@credo-ts/core/build/agent/models/InboundMessageContext.js
+++ b/node_modules/@credo-ts/core/build/agent/models/InboundMessageContext.js
@@ -4,12 +4,14 @@ exports.InboundMessageContext = void 0;
 const error_1 = require("../../error");
 class InboundMessageContext {
     constructor(message, context) {
+        var _a;
         this.message = message;
         this.recipientKey = context.recipientKey;
         this.senderKey = context.senderKey;
         this.connection = context.connection;
         this.sessionId = context.sessionId;
         this.agentContext = context.agentContext;
+        this.receivedAt = (_a = context.receivedAt) !== null && _a !== void 0 ? _a : new Date();
     }
     /**
      * Assert the inbound message has a ready connection associated with it.
diff --git a/node_modules/@credo-ts/core/build/agent/models/InboundMessageContext.js.map b/node_modules/@credo-ts/core/build/agent/models/InboundMessageContext.js.map
index 44ba051..b984c9e 100644
--- a/node_modules/@credo-ts/core/build/agent/models/InboundMessageContext.js.map
+++ b/node_modules/@credo-ts/core/build/agent/models/InboundMessageContext.js.map
@@ -1 +1 @@
-{"version":3,"file":"InboundMessageContext.js","sourceRoot":"","sources":["../../../src/agent/models/InboundMessageContext.ts"],"names":[],"mappings":";;;AAKA,uCAAwC;AAUxC,MAAa,qBAAqB;IAQhC,YAAmB,OAAU,EAAE,OAA6B;QAC1D,IAAI,CAAC,OAAO,GAAG,OAAO,CAAA;QACtB,IAAI,CAAC,YAAY,GAAG,OAAO,CAAC,YAAY,CAAA;QACxC,IAAI,CAAC,SAAS,GAAG,OAAO,CAAC,SAAS,CAAA;QAClC,IAAI,CAAC,UAAU,GAAG,OAAO,CAAC,UAAU,CAAA;QACpC,IAAI,CAAC,SAAS,GAAG,OAAO,CAAC,SAAS,CAAA;QAClC,IAAI,CAAC,YAAY,GAAG,OAAO,CAAC,YAAY,CAAA;IAC1C,CAAC;IAED;;;;OAIG;IACI,qBAAqB;QAC1B,IAAI,CAAC,IAAI,CAAC,UAAU,EAAE;YACpB,MAAM,IAAI,kBAAU,CAAC,kDAAkD,IAAI,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC,CAAA;SAC5F;QAED,gCAAgC;QAChC,IAAI,CAAC,UAAU,CAAC,WAAW,EAAE,CAAA;QAE7B,OAAO,IAAI,CAAC,UAAU,CAAA;IACxB,CAAC;IAEM,MAAM;;QACX,OAAO;YACL,OAAO,EAAE,IAAI,CAAC,OAAO;YACrB,YAAY,EAAE,MAAA,IAAI,CAAC,YAAY,0CAAE,WAAW;YAC5C,SAAS,EAAE,MAAA,IAAI,CAAC,SAAS,0CAAE,WAAW;YACtC,SAAS,EAAE,IAAI,CAAC,SAAS;YACzB,YAAY,EAAE,IAAI,CAAC,YAAY,CAAC,MAAM,EAAE;SACzC,CAAA;IACH,CAAC;CACF;AA1CD,sDA0CC"}
\ No newline at end of file
+{"version":3,"file":"InboundMessageContext.js","sourceRoot":"","sources":["../../../src/agent/models/InboundMessageContext.ts"],"names":[],"mappings":";;;AAKA,uCAAwC;AAWxC,MAAa,qBAAqB;IAShC,YAAmB,OAAU,EAAE,OAA6B;;QAC1D,IAAI,CAAC,OAAO,GAAG,OAAO,CAAA;QACtB,IAAI,CAAC,YAAY,GAAG,OAAO,CAAC,YAAY,CAAA;QACxC,IAAI,CAAC,SAAS,GAAG,OAAO,CAAC,SAAS,CAAA;QAClC,IAAI,CAAC,UAAU,GAAG,OAAO,CAAC,UAAU,CAAA;QACpC,IAAI,CAAC,SAAS,GAAG,OAAO,CAAC,SAAS,CAAA;QAClC,IAAI,CAAC,YAAY,GAAG,OAAO,CAAC,YAAY,CAAA;QACxC,IAAI,CAAC,UAAU,GAAG,MAAA,OAAO,CAAC,UAAU,mCAAI,IAAI,IAAI,EAAE,CAAA;IACpD,CAAC;IAED;;;;OAIG;IACI,qBAAqB;QAC1B,IAAI,CAAC,IAAI,CAAC,UAAU,EAAE;YACpB,MAAM,IAAI,kBAAU,CAAC,kDAAkD,IAAI,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC,CAAA;SAC5F;QAED,gCAAgC;QAChC,IAAI,CAAC,UAAU,CAAC,WAAW,EAAE,CAAA;QAE7B,OAAO,IAAI,CAAC,UAAU,CAAA;IACxB,CAAC;IAEM,MAAM;;QACX,OAAO;YACL,OAAO,EAAE,IAAI,CAAC,OAAO;YACrB,YAAY,EAAE,MAAA,IAAI,CAAC,YAAY,0CAAE,WAAW;YAC5C,SAAS,EAAE,MAAA,IAAI,CAAC,SAAS,0CAAE,WAAW;YACtC,SAAS,EAAE,IAAI,CAAC,SAAS;YACzB,YAAY,EAAE,IAAI,CAAC,YAAY,CAAC,MAAM,EAAE;SACzC,CAAA;IACH,CAAC;CACF;AA5CD,sDA4CC"}
\ No newline at end of file
diff --git a/node_modules/@credo-ts/core/build/modules/connections/ConnectionsApi.js b/node_modules/@credo-ts/core/build/modules/connections/ConnectionsApi.js
index 29d91b1..042ed17 100644
--- a/node_modules/@credo-ts/core/build/modules/connections/ConnectionsApi.js
+++ b/node_modules/@credo-ts/core/build/modules/connections/ConnectionsApi.js
@@ -49,8 +49,10 @@ let ConnectionsApi = class ConnectionsApi {
         if (ourDid && config.routing) {
             throw new error_1.CredoError(`'routing' is disallowed when defining 'ourDid'`);
         }
-        const routing = config.routing ||
-            (await this.routingService.getRouting(this.agentContext, { mediatorId: outOfBandRecord.mediatorId }));
+        // Only generate routing if ourDid hasn't been provided
+        const routing = config.routing || !ourDid
+            ? await this.routingService.getRouting(this.agentContext, { mediatorId: outOfBandRecord.mediatorId })
+            : undefined;
         let result;
         if (protocol === models_2.HandshakeProtocol.DidExchange) {
             result = await this.didExchangeProtocol.createRequest(this.agentContext, outOfBandRecord, {
@@ -65,6 +67,11 @@ let ConnectionsApi = class ConnectionsApi {
             if (ourDid) {
                 throw new error_1.CredoError('Using an externally defined did for connections protocol is unsupported');
             }
+            // This is just to make TS happy, as we always generate routing if ourDid is not provided
+            // and ourDid is not supported for connection (see check above)
+            if (!routing) {
+                throw new error_1.CredoError('Routing is required for connections protocol');
+            }
             result = await this.connectionService.createRequest(this.agentContext, outOfBandRecord, {
                 label,
                 alias,
@@ -104,9 +111,12 @@ let ConnectionsApi = class ConnectionsApi {
         if (!outOfBandRecord) {
             throw new error_1.CredoError(`Out-of-band record ${connectionRecord.outOfBandId} not found.`);
         }
-        // If the outOfBandRecord is reusable we need to use new routing keys for the connection, otherwise
-        // all connections will use the same routing keys
-        const routing = outOfBandRecord.reusable ? await this.routingService.getRouting(this.agentContext) : undefined;
+        // We generate routing in two scenarios:
+        // 1. When the out-of-band invitation is reusable, as otherwise all connections use the same keys
+        // 2. When the out-of-band invitation has no inline services, as we don't want to generate a legacy did doc from a service did
+        const routing = outOfBandRecord.reusable || outOfBandRecord.outOfBandInvitation.getInlineServices().length === 0
+            ? await this.routingService.getRouting(this.agentContext)
+            : undefined;
         let outboundMessageContext;
         if (connectionRecord.protocol === models_2.HandshakeProtocol.DidExchange) {
             const message = await this.didExchangeProtocol.createResponse(this.agentContext, connectionRecord, outOfBandRecord, routing);
@@ -116,6 +126,12 @@ let ConnectionsApi = class ConnectionsApi {
             });
         }
         else {
+            // We generate routing in two scenarios:
+            // 1. When the out-of-band invitation is reusable, as otherwise all connections use the same keys
+            // 2. When the out-of-band invitation has no inline services, as we don't want to generate a legacy did doc from a service did
+            const routing = outOfBandRecord.reusable || outOfBandRecord.outOfBandInvitation.getInlineServices().length === 0
+                ? await this.routingService.getRouting(this.agentContext)
+                : undefined;
             const { message } = await this.connectionService.createResponse(this.agentContext, connectionRecord, outOfBandRecord, routing);
             outboundMessageContext = new models_1.OutboundMessageContext(message, {
                 agentContext: this.agentContext,
diff --git a/node_modules/@credo-ts/core/build/modules/connections/ConnectionsApi.js.map b/node_modules/@credo-ts/core/build/modules/connections/ConnectionsApi.js.map
index 14c6044..b973b3a 100644
--- a/node_modules/@credo-ts/core/build/modules/connections/ConnectionsApi.js.map
+++ b/node_modules/@credo-ts/core/build/modules/connections/ConnectionsApi.js.map
@@ -1 +1 @@
-{"version":3,"file":"ConnectionsApi.js","sourceRoot":"","sources":["../../../src/modules/connections/ConnectionsApi.ts"],"names":[],"mappings":"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"}
\ No newline at end of file
+{"version":3,"file":"ConnectionsApi.js","sourceRoot":"","sources":["../../../src/modules/connections/ConnectionsApi.ts"],"names":[],"mappings":"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"}
\ No newline at end of file
diff --git a/node_modules/@credo-ts/core/build/modules/connections/DidExchangeProtocol.js b/node_modules/@credo-ts/core/build/modules/connections/DidExchangeProtocol.js
index 3b77431..c4a63d6 100644
--- a/node_modules/@credo-ts/core/build/modules/connections/DidExchangeProtocol.js
+++ b/node_modules/@credo-ts/core/build/modules/connections/DidExchangeProtocol.js
@@ -182,7 +182,7 @@ let DidExchangeProtocol = class DidExchangeProtocol {
         if (routing) {
             services = (0, helpers_3.routingToServices)(routing);
         }
-        else if (outOfBandRecord) {
+        else if (outOfBandRecord.outOfBandInvitation.getInlineServices().length > 0) {
             const inlineServices = outOfBandRecord.outOfBandInvitation.getInlineServices();
             services = inlineServices.map((service) => {
                 var _a, _b;
@@ -194,6 +194,10 @@ let DidExchangeProtocol = class DidExchangeProtocol {
                 });
             });
         }
+        else {
+            // We don't support using a did from the OOB invitation services currently, in this case we always pass routing to this method
+            throw new error_1.CredoError('No routing provided, and no inline services found in out of band invitation. When using did services in out of band invitation, make sure to provide routing information for rotation.');
+        }
         // Use the same num algo for response as received in request
         const numAlgo = (0, dids_1.isValidPeerDid)(theirDid)
             ? (0, dids_1.getNumAlgoFromPeerDid)(theirDid)
diff --git a/node_modules/@credo-ts/core/build/modules/connections/DidExchangeProtocol.js.map b/node_modules/@credo-ts/core/build/modules/connections/DidExchangeProtocol.js.map
index d82e96c..7e0adcf 100644
--- a/node_modules/@credo-ts/core/build/modules/connections/DidExchangeProtocol.js.map
+++ b/node_modules/@credo-ts/core/build/modules/connections/DidExchangeProtocol.js.map
@@ -1 +1 @@
-{"version":3,"file":"DidExchangeProtocol.js","sourceRoot":"","sources":["../../../src/modules/connections/DidExchangeProtocol.ts"],"names":[],"mappings":"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"}
\ No newline at end of file
+{"version":3,"file":"DidExchangeProtocol.js","sourceRoot":"","sources":["../../../src/modules/connections/DidExchangeProtocol.ts"],"names":[],"mappings":"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"}
\ No newline at end of file
diff --git a/node_modules/@credo-ts/core/build/modules/connections/handlers/ConnectionRequestHandler.js b/node_modules/@credo-ts/core/build/modules/connections/handlers/ConnectionRequestHandler.js
index fb4e984..f81959c 100644
--- a/node_modules/@credo-ts/core/build/modules/connections/handlers/ConnectionRequestHandler.js
+++ b/node_modules/@credo-ts/core/build/modules/connections/handlers/ConnectionRequestHandler.js
@@ -48,8 +48,14 @@ class ConnectionRequestHandler {
             transportService.setConnectionIdForSession(sessionId, connectionRecord.id);
         }
         if ((_b = connectionRecord === null || connectionRecord === void 0 ? void 0 : connectionRecord.autoAcceptConnection) !== null && _b !== void 0 ? _b : this.connectionsModuleConfig.autoAcceptConnections) {
-            // TODO: Allow rotation of keys used in the invitation for new ones not only when out-of-band is reusable
-            const routing = outOfBandRecord.reusable ? await this.routingService.getRouting(agentContext) : undefined;
+            // TODO: Allow rotation of keys used in the invitation for new ones not only when out-of-band is reusable or
+            // when there are no inline services in the invitation
+            // We generate routing in two scenarios:
+            // 1. When the out-of-band invitation is reusable, as otherwise all connections use the same keys
+            // 2. When the out-of-band invitation has no inline services, as we don't want to generate a legacy did doc from a service did
+            const routing = outOfBandRecord.reusable || outOfBandRecord.outOfBandInvitation.getInlineServices().length === 0
+                ? await this.routingService.getRouting(agentContext)
+                : undefined;
             const { message } = await this.connectionService.createResponse(agentContext, connectionRecord, outOfBandRecord, routing);
             return new models_1.OutboundMessageContext(message, {
                 agentContext,
diff --git a/node_modules/@credo-ts/core/build/modules/connections/handlers/ConnectionRequestHandler.js.map b/node_modules/@credo-ts/core/build/modules/connections/handlers/ConnectionRequestHandler.js.map
index c0eb584..fab55b3 100644
--- a/node_modules/@credo-ts/core/build/modules/connections/handlers/ConnectionRequestHandler.js.map
+++ b/node_modules/@credo-ts/core/build/modules/connections/handlers/ConnectionRequestHandler.js.map
@@ -1 +1 @@
-{"version":3,"file":"ConnectionRequestHandler.js","sourceRoot":"","sources":["../../../../src/modules/connections/handlers/ConnectionRequestHandler.ts"],"names":[],"mappings":"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"}
\ No newline at end of file
+{"version":3,"file":"ConnectionRequestHandler.js","sourceRoot":"","sources":["../../../../src/modules/connections/handlers/ConnectionRequestHandler.ts"],"names":[],"mappings":"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"}
\ No newline at end of file
diff --git a/node_modules/@credo-ts/core/build/modules/connections/handlers/DidExchangeRequestHandler.js b/node_modules/@credo-ts/core/build/modules/connections/handlers/DidExchangeRequestHandler.js
index 992adfa..e2120e6 100644
--- a/node_modules/@credo-ts/core/build/modules/connections/handlers/DidExchangeRequestHandler.js
+++ b/node_modules/@credo-ts/core/build/modules/connections/handlers/DidExchangeRequestHandler.js
@@ -58,7 +58,12 @@ class DidExchangeRequestHandler {
         if ((_b = connectionRecord.autoAcceptConnection) !== null && _b !== void 0 ? _b : this.connectionsModuleConfig.autoAcceptConnections) {
             // TODO We should add an option to not pass routing and therefore do not rotate keys and use the keys from the invitation
             // TODO: Allow rotation of keys used in the invitation for new ones not only when out-of-band is reusable
-            const routing = outOfBandRecord.reusable ? await this.routingService.getRouting(agentContext) : undefined;
+            // We generate routing in two scenarios:
+            // 1. When the out-of-band invitation is reusable, as otherwise all connections use the same keys
+            // 2. When the out-of-band invitation has no inline services, as we don't want to generate a legacy did doc from a service did
+            const routing = outOfBandRecord.reusable || outOfBandRecord.outOfBandInvitation.getInlineServices().length === 0
+                ? await this.routingService.getRouting(agentContext)
+                : undefined;
             const message = await this.didExchangeProtocol.createResponse(agentContext, connectionRecord, outOfBandRecord, routing);
             return new models_1.OutboundMessageContext(message, {
                 agentContext,
diff --git a/node_modules/@credo-ts/core/build/modules/connections/handlers/DidExchangeRequestHandler.js.map b/node_modules/@credo-ts/core/build/modules/connections/handlers/DidExchangeRequestHandler.js.map
index b3771c3..523bb47 100644
--- a/node_modules/@credo-ts/core/build/modules/connections/handlers/DidExchangeRequestHandler.js.map
+++ b/node_modules/@credo-ts/core/build/modules/connections/handlers/DidExchangeRequestHandler.js.map
@@ -1 +1 @@
-{"version":3,"file":"DidExchangeRequestHandler.js","sourceRoot":"","sources":["../../../../src/modules/connections/handlers/DidExchangeRequestHandler.ts"],"names":[],"mappings":"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"}
\ No newline at end of file
+{"version":3,"file":"DidExchangeRequestHandler.js","sourceRoot":"","sources":["../../../../src/modules/connections/handlers/DidExchangeRequestHandler.ts"],"names":[],"mappings":"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"}
\ No newline at end of file
diff --git a/node_modules/@credo-ts/core/build/modules/connections/services/ConnectionService.js b/node_modules/@credo-ts/core/build/modules/connections/services/ConnectionService.js
index a00bfe2..3a6b339 100644
--- a/node_modules/@credo-ts/core/build/modules/connections/services/ConnectionService.js
+++ b/node_modules/@credo-ts/core/build/modules/connections/services/ConnectionService.js
@@ -148,9 +148,17 @@ let ConnectionService = class ConnectionService {
         this.logger.debug(`Create message ${messages_2.ConnectionResponseMessage.type.messageTypeUri} start`, connectionRecord);
         connectionRecord.assertState(models_1.DidExchangeState.RequestReceived);
         connectionRecord.assertRole(models_1.DidExchangeRole.Responder);
-        const didDoc = routing
-            ? this.createDidDoc(routing)
-            : this.createDidDocFromOutOfBandDidCommServices(outOfBandRecord.outOfBandInvitation.getInlineServices());
+        let didDoc;
+        if (routing) {
+            didDoc = this.createDidDoc(routing);
+        }
+        else if (outOfBandRecord.outOfBandInvitation.getInlineServices().length > 0) {
+            didDoc = this.createDidDocFromOutOfBandDidCommServices(outOfBandRecord.outOfBandInvitation.getInlineServices());
+        }
+        else {
+            // We don't support using a did from the OOB invitation services currently, in this case we always pass routing to this method
+            throw new error_1.CredoError('No routing provided, and no inline services found in out of band invitation. When using did services in out of band invitation, make sure to provide routing information for rotation.');
+        }
         const { did: peerDid } = await this.createDid(agentContext, {
             role: DidDocumentRole_1.DidDocumentRole.Created,
             didDoc,
@@ -567,6 +575,8 @@ let ConnectionService = class ConnectionService {
     async createDid(agentContext, { role, didDoc }) {
         // Convert the legacy did doc to a new did document
         const didDocument = (0, helpers_2.convertToNewDidDocument)(didDoc);
+        // Assert that the keys we are going to use for creating a did document haven't already been used in another did document
+        await (0, helpers_2.assertNoCreatedDidExistsForKeys)(agentContext, didDocument.recipientKeys);
         const peerDid = (0, peerDidNumAlgo1_1.didDocumentJsonToNumAlgo1Did)(didDocument.toJSON());
         didDocument.id = peerDid;
         const didRecord = new repository_1.DidRecord({
diff --git a/node_modules/@credo-ts/core/build/modules/connections/services/ConnectionService.js.map b/node_modules/@credo-ts/core/build/modules/connections/services/ConnectionService.js.map
index 8ee03ff..87906e2 100644
--- a/node_modules/@credo-ts/core/build/modules/connections/services/ConnectionService.js.map
+++ b/node_modules/@credo-ts/core/build/modules/connections/services/ConnectionService.js.map
@@ -1 +1 @@
-{"version":3,"file":"ConnectionService.js","sourceRoot":"","sources":["../../../../src/modules/connections/services/ConnectionService.ts"],"names":[],"mappings":"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"}
\ No newline at end of file
+{"version":3,"file":"ConnectionService.js","sourceRoot":"","sources":["../../../../src/modules/connections/services/ConnectionService.ts"],"names":[],"mappings":"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"}
\ No newline at end of file
diff --git a/node_modules/@credo-ts/core/build/modules/connections/services/helpers.d.ts b/node_modules/@credo-ts/core/build/modules/connections/services/helpers.d.ts
index e9038ee..d4eaec7 100644
--- a/node_modules/@credo-ts/core/build/modules/connections/services/helpers.d.ts
+++ b/node_modules/@credo-ts/core/build/modules/connections/services/helpers.d.ts
@@ -3,7 +3,14 @@ import type { AgentContext } from '../../../agent';
 import type { ResolvedDidCommService } from '../../didcomm';
 import type { DidDocument, PeerDidNumAlgo } from '../../dids';
 import type { DidDoc } from '../models';
+import { Key } from '../../../crypto';
 export declare function convertToNewDidDocument(didDoc: DidDoc): DidDocument;
 export declare function routingToServices(routing: Routing): ResolvedDidCommService[];
 export declare function getDidDocumentForCreatedDid(agentContext: AgentContext, did: string): Promise<DidDocument>;
+/**
+ * Asserts that the keys we are going to use for creating a did document haven't already been used in another did document
+ * Due to how DIDComm v1 works (only reference the key not the did in encrypted message) we can't have multiple dids containing
+ * the same key as we won't know which did (and thus which connection) a message is intended for.
+ */
+export declare function assertNoCreatedDidExistsForKeys(agentContext: AgentContext, recipientKeys: Key[]): Promise<void>;
 export declare function createPeerDidFromServices(agentContext: AgentContext, services: ResolvedDidCommService[], numAlgo: PeerDidNumAlgo): Promise<DidDocument>;
diff --git a/node_modules/@credo-ts/core/build/modules/connections/services/helpers.js b/node_modules/@credo-ts/core/build/modules/connections/services/helpers.js
index da18676..7fd37d2 100644
--- a/node_modules/@credo-ts/core/build/modules/connections/services/helpers.js
+++ b/node_modules/@credo-ts/core/build/modules/connections/services/helpers.js
@@ -1,6 +1,6 @@
 "use strict";
 Object.defineProperty(exports, "__esModule", { value: true });
-exports.createPeerDidFromServices = exports.getDidDocumentForCreatedDid = exports.routingToServices = exports.convertToNewDidDocument = void 0;
+exports.createPeerDidFromServices = exports.assertNoCreatedDidExistsForKeys = exports.getDidDocumentForCreatedDid = exports.routingToServices = exports.convertToNewDidDocument = void 0;
 const crypto_1 = require("../../../crypto");
 const error_1 = require("../../../error");
 const dids_1 = require("../../dids");
@@ -109,11 +109,36 @@ async function getDidDocumentForCreatedDid(agentContext, did) {
     return didRecord.didDocument;
 }
 exports.getDidDocumentForCreatedDid = getDidDocumentForCreatedDid;
+/**
+ * Asserts that the keys we are going to use for creating a did document haven't already been used in another did document
+ * Due to how DIDComm v1 works (only reference the key not the did in encrypted message) we can't have multiple dids containing
+ * the same key as we won't know which did (and thus which connection) a message is intended for.
+ */
+async function assertNoCreatedDidExistsForKeys(agentContext, recipientKeys) {
+    const didRepository = agentContext.dependencyManager.resolve(dids_1.DidRepository);
+    const recipientKeyFingerprints = recipientKeys.map((key) => key.fingerprint);
+    const didsForServices = await didRepository.findByQuery(agentContext, {
+        role: dids_1.DidDocumentRole.Created,
+        // We want an $or query so we query for each key individually, not one did document
+        // containing exactly the same keys as the did document we are trying to create
+        $or: recipientKeyFingerprints.map((fingerprint) => ({
+            recipientKeyFingerprints: [fingerprint],
+        })),
+    });
+    if (didsForServices.length > 0) {
+        const allDidRecipientKeys = didsForServices.flatMap((did) => { var _a; return (_a = did.getTags().recipientKeyFingerprints) !== null && _a !== void 0 ? _a : []; });
+        const matchingFingerprints = allDidRecipientKeys.filter((f) => recipientKeyFingerprints.includes(f));
+        throw new error_1.CredoError(`A did already exists for some of the keys in the provided services. DIDComm v1 uses key based routing, and therefore it is not allowed to re-use the same key in multiple did documents for DIDComm. If you use the same 'routing' object for multiple invitations, instead provide an 'invitationDid' to the create invitation method. The following fingerprints are already in use: ${matchingFingerprints.join(',')}`);
+    }
+}
+exports.assertNoCreatedDidExistsForKeys = assertNoCreatedDidExistsForKeys;
 async function createPeerDidFromServices(agentContext, services, numAlgo) {
     var _a;
     const didsApi = agentContext.dependencyManager.resolve(dids_1.DidsApi);
     // Create did document without the id property
     const didDocument = (0, dids_1.createPeerDidDocumentFromServices)(services);
+    // Assert that the keys we are going to use for creating a did document haven't already been used in another did document
+    await assertNoCreatedDidExistsForKeys(agentContext, didDocument.recipientKeys);
     // Register did:peer document. This will generate the id property and save it to a did record
     const result = await didsApi.create({
         method: 'peer',
diff --git a/node_modules/@credo-ts/core/build/modules/connections/services/helpers.js.map b/node_modules/@credo-ts/core/build/modules/connections/services/helpers.js.map
index aba70ca..122b297 100644
--- a/node_modules/@credo-ts/core/build/modules/connections/services/helpers.js.map
+++ b/node_modules/@credo-ts/core/build/modules/connections/services/helpers.js.map
@@ -1 +1 @@
-{"version":3,"file":"helpers.js","sourceRoot":"","sources":["../../../../src/modules/connections/services/helpers.ts"],"names":[],"mappings":"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"}
\ No newline at end of file
+{"version":3,"file":"helpers.js","sourceRoot":"","sources":["../../../../src/modules/connections/services/helpers.ts"],"names":[],"mappings":"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"}
\ No newline at end of file
diff --git a/node_modules/@credo-ts/core/build/modules/dif-presentation-exchange/DifPresentationExchangeService.js b/node_modules/@credo-ts/core/build/modules/dif-presentation-exchange/DifPresentationExchangeService.js
index d072e75..4455eb5 100644
--- a/node_modules/@credo-ts/core/build/modules/dif-presentation-exchange/DifPresentationExchangeService.js
+++ b/node_modules/@credo-ts/core/build/modules/dif-presentation-exchange/DifPresentationExchangeService.js
@@ -49,7 +49,7 @@ let DifPresentationExchangeService = class DifPresentationExchangeService {
                     credentials[submission.inputDescriptorId] = [];
                 }
                 // We pick the first matching VC if we are auto-selecting
-                credentials[submission.inputDescriptorId].push(submission.verifiableCredentials[0]);
+                credentials[submission.inputDescriptorId].push(submission.verifiableCredentials[0].credentialRecord);
             }
         }
         return credentials;
diff --git a/node_modules/@credo-ts/core/build/modules/dif-presentation-exchange/DifPresentationExchangeService.js.map b/node_modules/@credo-ts/core/build/modules/dif-presentation-exchange/DifPresentationExchangeService.js.map
index b0cdfc3..23b83d1 100644
--- a/node_modules/@credo-ts/core/build/modules/dif-presentation-exchange/DifPresentationExchangeService.js.map
+++ b/node_modules/@credo-ts/core/build/modules/dif-presentation-exchange/DifPresentationExchangeService.js.map
@@ -1 +1 @@
-{"version":3,"file":"DifPresentationExchangeService.js","sourceRoot":"","sources":["../../../src/modules/dif-presentation-exchange/DifPresentationExchangeService.ts"],"names":[],"mappings":"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"}
\ No newline at end of file
+{"version":3,"file":"DifPresentationExchangeService.js","sourceRoot":"","sources":["../../../src/modules/dif-presentation-exchange/DifPresentationExchangeService.ts"],"names":[],"mappings":"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"}
\ No newline at end of file
diff --git a/node_modules/@credo-ts/core/build/modules/dif-presentation-exchange/models/DifPexCredentialsForRequest.d.ts b/node_modules/@credo-ts/core/build/modules/dif-presentation-exchange/models/DifPexCredentialsForRequest.d.ts
index 35853d0..06b2b7c 100644
--- a/node_modules/@credo-ts/core/build/modules/dif-presentation-exchange/models/DifPexCredentialsForRequest.d.ts
+++ b/node_modules/@credo-ts/core/build/modules/dif-presentation-exchange/models/DifPexCredentialsForRequest.d.ts
@@ -1,5 +1,5 @@
 import type { SdJwtVcRecord } from '../../sd-jwt-vc';
-import type { W3cCredentialRecord } from '../../vc';
+import type { ClaimFormat, W3cCredentialRecord } from '../../vc';
 export interface DifPexCredentialsForRequest {
     /**
      * Whether all requirements have been satisfied by the credentials in the wallet.
@@ -97,8 +97,20 @@ export interface DifPexCredentialsForRequestSubmissionEntry {
      * If the value is an empty list, it means the input descriptor could
      * not be satisfied.
      */
-    verifiableCredentials: Array<W3cCredentialRecord | SdJwtVcRecord>;
+    verifiableCredentials: SubmissionEntryCredential[];
 }
+export type SubmissionEntryCredential = {
+    type: ClaimFormat.SdJwtVc;
+    credentialRecord: SdJwtVcRecord;
+    /**
+     * The payload that will be disclosed, including always disclosed attributes
+     * and disclosures for the presentation definition
+     */
+    disclosedPayload: Record<string, unknown>;
+} | {
+    type: ClaimFormat.JwtVc | ClaimFormat.LdpVc;
+    credentialRecord: W3cCredentialRecord;
+};
 /**
  * Mapping of selected credentials for an input descriptor
  */
diff --git a/node_modules/@credo-ts/core/build/modules/dif-presentation-exchange/utils/credentialSelection.d.ts b/node_modules/@credo-ts/core/build/modules/dif-presentation-exchange/utils/credentialSelection.d.ts
index 6fdbfde..7e07587 100644
--- a/node_modules/@credo-ts/core/build/modules/dif-presentation-exchange/utils/credentialSelection.d.ts
+++ b/node_modules/@credo-ts/core/build/modules/dif-presentation-exchange/utils/credentialSelection.d.ts
@@ -1,5 +1,5 @@
-import type { SdJwtVcRecord } from '../../sd-jwt-vc';
-import type { W3cCredentialRecord } from '../../vc';
 import type { DifPexCredentialsForRequest } from '../models';
 import type { IPresentationDefinition, PEX } from '@sphereon/pex';
+import { SdJwtVcRecord } from '../../sd-jwt-vc';
+import { W3cCredentialRecord } from '../../vc';
 export declare function getCredentialsForRequest(pex: PEX, presentationDefinition: IPresentationDefinition, credentialRecords: Array<W3cCredentialRecord | SdJwtVcRecord>): Promise<DifPexCredentialsForRequest>;
diff --git a/node_modules/@credo-ts/core/build/modules/dif-presentation-exchange/utils/credentialSelection.js b/node_modules/@credo-ts/core/build/modules/dif-presentation-exchange/utils/credentialSelection.js
index 88bb374..972758c 100644
--- a/node_modules/@credo-ts/core/build/modules/dif-presentation-exchange/utils/credentialSelection.js
+++ b/node_modules/@credo-ts/core/build/modules/dif-presentation-exchange/utils/credentialSelection.js
@@ -4,9 +4,13 @@ var __importDefault = (this && this.__importDefault) || function (mod) {
 };
 Object.defineProperty(exports, "__esModule", { value: true });
 exports.getCredentialsForRequest = void 0;
+const decode_1 = require("@sd-jwt/decode");
 const pex_models_1 = require("@sphereon/pex-models");
 const jsonpath_1 = __importDefault(require("jsonpath"));
+const error_1 = require("../../../error");
 const utils_1 = require("../../../utils");
+const sd_jwt_vc_1 = require("../../sd-jwt-vc");
+const vc_1 = require("../../vc");
 const DifPresentationExchangeError_1 = require("../DifPresentationExchangeError");
 const transform_1 = require("./transform");
 async function getCredentialsForRequest(
@@ -37,7 +41,26 @@ pex, presentationDefinition, credentialRecords) {
             if (credentialRecordIndex === -1) {
                 throw new DifPresentationExchangeError_1.DifPresentationExchangeError('Unable to find credential in credential records.');
             }
-            return credentialRecords[credentialRecordIndex];
+            const credentialRecord = credentialRecords[credentialRecordIndex];
+            if (credentialRecord instanceof sd_jwt_vc_1.SdJwtVcRecord) {
+                // selectedEncoded always string when SdJwtVcRecord
+                // Get the decoded payload from the the selected credential, this already has SD applied
+                const { decodedPayload } = (0, decode_1.decodeSdJwtVc)(selectedEncoded, utils_1.Hasher.hash);
+                return {
+                    type: vc_1.ClaimFormat.SdJwtVc,
+                    credentialRecord,
+                    disclosedPayload: decodedPayload,
+                };
+            }
+            else if (credentialRecord instanceof vc_1.W3cCredentialRecord) {
+                return {
+                    type: credentialRecord.credential.claimFormat,
+                    credentialRecord,
+                };
+            }
+            else {
+                throw new error_1.CredoError(`Unrecognized credential record type`);
+            }
         }) });
     const presentationSubmission = {
         requirements: [],
diff --git a/node_modules/@credo-ts/core/build/modules/dif-presentation-exchange/utils/credentialSelection.js.map b/node_modules/@credo-ts/core/build/modules/dif-presentation-exchange/utils/credentialSelection.js.map
index e582225..cfa894a 100644
--- a/node_modules/@credo-ts/core/build/modules/dif-presentation-exchange/utils/credentialSelection.js.map
+++ b/node_modules/@credo-ts/core/build/modules/dif-presentation-exchange/utils/credentialSelection.js.map
@@ -1 +1 @@
-{"version":3,"file":"credentialSelection.js","sourceRoot":"","sources":["../../../../src/modules/dif-presentation-exchange/utils/credentialSelection.ts"],"names":[],"mappings":"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"}
\ No newline at end of file
+{"version":3,"file":"credentialSelection.js","sourceRoot":"","sources":["../../../../src/modules/dif-presentation-exchange/utils/credentialSelection.ts"],"names":[],"mappings":"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"}
\ No newline at end of file
diff --git a/node_modules/@credo-ts/core/build/modules/message-pickup/protocol/v2/V2MessagePickupProtocol.js b/node_modules/@credo-ts/core/build/modules/message-pickup/protocol/v2/V2MessagePickupProtocol.js
index 7b30478..ef714ce 100644
--- a/node_modules/@credo-ts/core/build/modules/message-pickup/protocol/v2/V2MessagePickupProtocol.js
+++ b/node_modules/@credo-ts/core/build/modules/message-pickup/protocol/v2/V2MessagePickupProtocol.js
@@ -71,6 +71,7 @@ let V2MessagePickupProtocol = class V2MessagePickupProtocol extends BaseMessageP
         }
         const attachments = messagesToDeliver.map((msg) => new Attachment_1.Attachment({
             id: msg.id,
+            lastmodTime: msg.receivedAt,
             data: {
                 json: msg.encryptedMessage,
             },
@@ -122,6 +123,7 @@ let V2MessagePickupProtocol = class V2MessagePickupProtocol extends BaseMessageP
         });
         const attachments = messages.map((msg) => new Attachment_1.Attachment({
             id: msg.id,
+            lastmodTime: msg.receivedAt,
             data: {
                 json: msg.encryptedMessage,
             },
@@ -222,6 +224,7 @@ let V2MessagePickupProtocol = class V2MessagePickupProtocol extends BaseMessageP
                 payload: {
                     message: attachment.getDataAsJson(),
                     contextCorrelationId: messageContext.agentContext.contextCorrelationId,
+                    receivedAt: attachment.lastmodTime,
                 },
             });
         }
diff --git a/node_modules/@credo-ts/core/build/modules/message-pickup/protocol/v2/V2MessagePickupProtocol.js.map b/node_modules/@credo-ts/core/build/modules/message-pickup/protocol/v2/V2MessagePickupProtocol.js.map
index cf7825b..9b36c9b 100644
--- a/node_modules/@credo-ts/core/build/modules/message-pickup/protocol/v2/V2MessagePickupProtocol.js.map
+++ b/node_modules/@credo-ts/core/build/modules/message-pickup/protocol/v2/V2MessagePickupProtocol.js.map
@@ -1 +1 @@
-{"version":3,"file":"V2MessagePickupProtocol.js","sourceRoot":"","sources":["../../../../../src/modules/message-pickup/protocol/v2/V2MessagePickupProtocol.ts"],"names":[],"mappings":"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"}
\ No newline at end of file
+{"version":3,"file":"V2MessagePickupProtocol.js","sourceRoot":"","sources":["../../../../../src/modules/message-pickup/protocol/v2/V2MessagePickupProtocol.ts"],"names":[],"mappings":"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"}
\ No newline at end of file
diff --git a/node_modules/@credo-ts/core/build/modules/message-pickup/storage/QueuedMessage.d.ts b/node_modules/@credo-ts/core/build/modules/message-pickup/storage/QueuedMessage.d.ts
index 4eddcb4..e2cff56 100644
--- a/node_modules/@credo-ts/core/build/modules/message-pickup/storage/QueuedMessage.d.ts
+++ b/node_modules/@credo-ts/core/build/modules/message-pickup/storage/QueuedMessage.d.ts
@@ -1,5 +1,12 @@
 import type { EncryptedMessage } from '../../../types';
+/**
+ * Basic representation of an encrypted message in a Message Pickup Queue
+ * - id: Message Pickup repository's specific queued message id (unrelated to DIDComm message id)
+ * - receivedAt: reception time (i.e. time when the message has been added to the queue)
+ * - encryptedMessage: packed message
+ */
 export type QueuedMessage = {
     id: string;
+    receivedAt?: Date;
     encryptedMessage: EncryptedMessage;
 };
diff --git a/node_modules/@credo-ts/core/build/modules/oob/OutOfBandApi.d.ts b/node_modules/@credo-ts/core/build/modules/oob/OutOfBandApi.d.ts
index 7bc117b..809ca30 100644
--- a/node_modules/@credo-ts/core/build/modules/oob/OutOfBandApi.d.ts
+++ b/node_modules/@credo-ts/core/build/modules/oob/OutOfBandApi.d.ts
@@ -26,6 +26,10 @@ export interface CreateOutOfBandInvitationConfig {
     autoAcceptConnection?: boolean;
     routing?: Routing;
     appendedAttachments?: Attachment[];
+    /**
+     * Did to use in the invitation. Cannot be used in combination with `routing`.
+     */
+    invitationDid?: string;
 }
 export interface CreateLegacyInvitationConfig {
     label?: string;
@@ -266,6 +270,7 @@ export declare class OutOfBandApi {
     private emitWithServices;
     private ensureParentThreadId;
     private handleHandshakeReuse;
+    private resolveInvitationRecipientKeyFingerprints;
     private registerMessageHandlers;
 }
 export {};
diff --git a/node_modules/@credo-ts/core/build/modules/oob/OutOfBandApi.js b/node_modules/@credo-ts/core/build/modules/oob/OutOfBandApi.js
index f611696..8bcdcdc 100644
--- a/node_modules/@credo-ts/core/build/modules/oob/OutOfBandApi.js
+++ b/node_modules/@credo-ts/core/build/modules/oob/OutOfBandApi.js
@@ -104,16 +104,27 @@ let OutOfBandApi = class OutOfBandApi {
             // Find supported handshake protocol preserving the order of handshake protocols defined by agent or in config
             handshakeProtocols = this.getSupportedHandshakeProtocols(customHandshakeProtocols).map((p) => p.parsedProtocolUri.protocolUri);
         }
-        const routing = (_f = config.routing) !== null && _f !== void 0 ? _f : (await this.routingService.getRouting(this.agentContext, {}));
-        const services = routing.endpoints.map((endpoint, index) => {
-            return new OutOfBandDidCommService_1.OutOfBandDidCommService({
-                id: `#inline-${index}`,
-                serviceEndpoint: endpoint,
-                recipientKeys: [routing.recipientKey].map((key) => new dids_1.DidKey(key).did),
-                routingKeys: routing.routingKeys.map((key) => new dids_1.DidKey(key).did),
+        let mediatorId = undefined;
+        let services;
+        if (config.routing && config.invitationDid) {
+            throw new error_1.CredoError("Both 'routing' and 'invitationDid' cannot be provided at the same time.");
+        }
+        if (config.invitationDid) {
+            services = [config.invitationDid];
+        }
+        else {
+            const routing = (_f = config.routing) !== null && _f !== void 0 ? _f : (await this.routingService.getRouting(this.agentContext, {}));
+            mediatorId = routing === null || routing === void 0 ? void 0 : routing.mediatorId;
+            services = routing.endpoints.map((endpoint, index) => {
+                return new OutOfBandDidCommService_1.OutOfBandDidCommService({
+                    id: `#inline-${index}`,
+                    serviceEndpoint: endpoint,
+                    recipientKeys: [routing.recipientKey].map((key) => new dids_1.DidKey(key).did),
+                    routingKeys: routing.routingKeys.map((key) => new dids_1.DidKey(key).did),
+                });
             });
-        });
-        const options = {
+        }
+        const outOfBandInvitation = new messages_1.OutOfBandInvitation({
             label,
             goal: config.goal,
             goalCode: config.goalCode,
@@ -122,8 +133,7 @@ let OutOfBandApi = class OutOfBandApi {
             services,
             handshakeProtocols,
             appendedAttachments,
-        };
-        const outOfBandInvitation = new messages_1.OutOfBandInvitation(options);
+        });
         if (messages) {
             messages.forEach((message) => {
                 if (message.service) {
@@ -133,8 +143,9 @@ let OutOfBandApi = class OutOfBandApi {
                 outOfBandInvitation.addRequest(message);
             });
         }
+        const recipientKeyFingerprints = await this.resolveInvitationRecipientKeyFingerprints(outOfBandInvitation);
         const outOfBandRecord = new OutOfBandRecord_1.OutOfBandRecord({
-            mediatorId: routing.mediatorId,
+            mediatorId: mediatorId,
             role: OutOfBandRole_1.OutOfBandRole.Sender,
             state: OutOfBandState_1.OutOfBandState.AwaitResponse,
             alias: config.alias,
@@ -142,9 +153,7 @@ let OutOfBandApi = class OutOfBandApi {
             reusable: multiUseInvitation,
             autoAcceptConnection,
             tags: {
-                recipientKeyFingerprints: services
-                    .reduce((aggr, { recipientKeys }) => [...aggr, ...recipientKeys], [])
-                    .map((didKey) => dids_1.DidKey.fromDid(didKey).key.fingerprint),
+                recipientKeyFingerprints,
             },
         });
         await this.outOfBandService.save(this.agentContext, outOfBandRecord);
@@ -296,20 +305,7 @@ let OutOfBandApi = class OutOfBandApi {
                 throw new error_1.CredoError(`An out of band record with invitation ${outOfBandInvitation.id} has already been received. Invitations should have a unique id.`);
             }
         }
-        const recipientKeyFingerprints = [];
-        for (const service of outOfBandInvitation.getServices()) {
-            // Resolve dids to DIDDocs to retrieve services
-            if (typeof service === 'string') {
-                this.logger.debug(`Resolving services for did ${service}.`);
-                const resolvedDidCommServices = await this.didCommDocumentService.resolveServicesFromDid(this.agentContext, service);
-                recipientKeyFingerprints.push(...resolvedDidCommServices
-                    .reduce((aggr, { recipientKeys }) => [...aggr, ...recipientKeys], [])
-                    .map((key) => key.fingerprint));
-            }
-            else {
-                recipientKeyFingerprints.push(...service.recipientKeys.map((didKey) => dids_1.DidKey.fromDid(didKey).key.fingerprint));
-            }
-        }
+        const recipientKeyFingerprints = await this.resolveInvitationRecipientKeyFingerprints(outOfBandInvitation);
         const outOfBandRecord = new OutOfBandRecord_1.OutOfBandRecord({
             role: OutOfBandRole_1.OutOfBandRole.Receiver,
             state: OutOfBandState_1.OutOfBandState.Initial,
@@ -512,10 +508,13 @@ let OutOfBandApi = class OutOfBandApi {
     async deleteById(outOfBandId) {
         const outOfBandRecord = await this.getById(outOfBandId);
         const relatedConnections = await this.connectionsApi.findAllByOutOfBandId(outOfBandId);
-        // If it uses mediation and there are no related connections, proceed to delete keys from mediator
+        // If it uses mediation and there are no related connections, AND we didn't use a did in the invitation
+        // (if that is the case the did is managed outside of this exchange) proceed to delete keys from mediator
         // Note: if OOB Record is reusable, it is safe to delete it because every connection created from
         // it will use its own recipient key
-        if (outOfBandRecord.mediatorId && (relatedConnections.length === 0 || outOfBandRecord.reusable)) {
+        if (outOfBandRecord.mediatorId &&
+            outOfBandRecord.outOfBandInvitation.getDidServices().length === 0 &&
+            (relatedConnections.length === 0 || outOfBandRecord.reusable)) {
             const recipientKeys = outOfBandRecord.getTags().recipientKeyFingerprints.map((item) => crypto_1.Key.fromFingerprint(item));
             await this.routingService.removeRouting(this.agentContext, {
                 recipientKeys,
@@ -679,6 +678,23 @@ let OutOfBandApi = class OutOfBandApi {
         await this.messageSender.sendMessage(outboundMessageContext);
         return reuseAcceptedEventPromise;
     }
+    async resolveInvitationRecipientKeyFingerprints(outOfBandInvitation) {
+        const recipientKeyFingerprints = [];
+        for (const service of outOfBandInvitation.getServices()) {
+            // Resolve dids to DIDDocs to retrieve services
+            if (typeof service === 'string') {
+                this.logger.debug(`Resolving services for did ${service}.`);
+                const resolvedDidCommServices = await this.didCommDocumentService.resolveServicesFromDid(this.agentContext, service);
+                recipientKeyFingerprints.push(...resolvedDidCommServices
+                    .reduce((aggr, { recipientKeys }) => [...aggr, ...recipientKeys], [])
+                    .map((key) => key.fingerprint));
+            }
+            else {
+                recipientKeyFingerprints.push(...service.recipientKeys.map((didKey) => dids_1.DidKey.fromDid(didKey).key.fingerprint));
+            }
+        }
+        return recipientKeyFingerprints;
+    }
     // TODO: we should probably move these to the out of band module and register the handler there
     registerMessageHandlers(messageHandlerRegistry) {
         messageHandlerRegistry.registerMessageHandler(new handlers_1.HandshakeReuseHandler(this.outOfBandService));
diff --git a/node_modules/@credo-ts/core/build/modules/oob/OutOfBandApi.js.map b/node_modules/@credo-ts/core/build/modules/oob/OutOfBandApi.js.map
index 893551d..62347f2 100644
--- a/node_modules/@credo-ts/core/build/modules/oob/OutOfBandApi.js.map
+++ b/node_modules/@credo-ts/core/build/modules/oob/OutOfBandApi.js.map
@@ -1 +1 @@
-{"version":3,"file":"OutOfBandApi.js","sourceRoot":"","sources":["../../../src/modules/oob/OutOfBandApi.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;AAQA,+BAAsF;AAEtF,uCAA0C;AAC1C,2DAAuD;AACvD,+CAAgF;AAChF,+EAA2E;AAC3E,6DAAyD;AACzD,+CAA2D;AAC3D,+CAAkD;AAClD,yCAAkC;AAClC,gFAA4E;AAC5E,uCAAwC;AAExC,2CAAkD;AAClD,uCAA0D;AAC1D,yDAKgC;AAChC,iEAAqE;AACrE,gDAAoF;AACpF,wCAAmD;AACnD,kCAAgC;AAChC,uEAAmE;AAEnE,yDAAqD;AACrD,8EAA0E;AAC1E,8DAA8D;AAC9D,0DAAsD;AACtD,4DAAwD;AACxD,yCAAkD;AAClD,4FAAwF;AACxF,uCAA0E;AAC1E,yCAAgE;AAChE,6CAAkD;AAClD,kEAA8D;AAC9D,4FAAuF;AAEvF,MAAM,eAAe,GAAG,CAAC,cAAc,EAAE,wBAAwB,CAAC,CAAA;AAgD3D,IAAM,YAAY,GAAlB,MAAM,YAAY;IAWvB,YACE,sBAA8C,EAC9C,sBAA8C,EAC9C,gBAAkC,EAClC,cAA8B,EAC9B,cAA8B,EAC9B,aAA4B,EAC5B,YAA0B,EACO,MAAc,EAC/C,YAA0B;QAE1B,IAAI,CAAC,sBAAsB,GAAG,sBAAsB,CAAA;QACpD,IAAI,CAAC,sBAAsB,GAAG,sBAAsB,CAAA;QACpD,IAAI,CAAC,YAAY,GAAG,YAAY,CAAA;QAChC,IAAI,CAAC,MAAM,GAAG,MAAM,CAAA;QACpB,IAAI,CAAC,gBAAgB,GAAG,gBAAgB,CAAA;QACxC,IAAI,CAAC,cAAc,GAAG,cAAc,CAAA;QACpC,IAAI,CAAC,cAAc,GAAG,cAAc,CAAA;QACpC,IAAI,CAAC,aAAa,GAAG,aAAa,CAAA;QAClC,IAAI,CAAC,YAAY,GAAG,YAAY,CAAA;QAChC,IAAI,CAAC,uBAAuB,CAAC,sBAAsB,CAAC,CAAA;IACtD,CAAC;IAED;;;;;;;;;;;;;;OAcG;IACI,KAAK,CAAC,gBAAgB,CAAC,SAA0C,EAAE;;QACxE,MAAM,kBAAkB,GAAG,MAAA,MAAM,CAAC,kBAAkB,mCAAI,KAAK,CAAA;QAC7D,MAAM,SAAS,GAAG,MAAA,MAAM,CAAC,SAAS,mCAAI,IAAI,CAAA;QAC1C,MAAM,wBAAwB,GAAG,MAAM,CAAC,kBAAkB,CAAA;QAC1D,MAAM,oBAAoB,GAAG,MAAA,MAAM,CAAC,oBAAoB,mCAAI,IAAI,CAAC,cAAc,CAAC,MAAM,CAAC,qBAAqB,CAAA;QAC5G,mEAAmE;QACnE,MAAM,QAAQ,GAAG,MAAM,CAAC,QAAQ,IAAI,MAAM,CAAC,QAAQ,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,CAAC,SAAS,CAAA;QAC5F,MAAM,KAAK,GAAG,MAAA,MAAM,CAAC,KAAK,mCAAI,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC,KAAK,CAAA;QAC5D,MAAM,QAAQ,GAAG,MAAA,MAAM,CAAC,QAAQ,mCAAI,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC,kBAAkB,CAAA;QAC/E,MAAM,mBAAmB,GACvB,MAAM,CAAC,mBAAmB,IAAI,MAAM,CAAC,mBAAmB,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,mBAAmB,CAAC,CAAC,CAAC,SAAS,CAAA;QAE9G,IAAI,CAAC,SAAS,IAAI,CAAC,QAAQ,EAAE;YAC3B,MAAM,IAAI,kBAAU,CAAC,yFAAyF,CAAC,CAAA;SAChH;QAED,IAAI,CAAC,SAAS,IAAI,wBAAwB,EAAE;YAC1C,MAAM,IAAI,kBAAU,CAAC,gFAAgF,CAAC,CAAA;SACvG;QAED,wGAAwG;QACxG,yCAAyC;QACzC,IAAI,QAAQ,IAAI,kBAAkB,EAAE;YAClC,MAAM,IAAI,kBAAU,CAAC,8EAA8E,CAAC,CAAA;SACrG;QAED,IAAI,kBAAwC,CAAA;QAC5C,IAAI,SAAS,EAAE;YACb,sDAAsD;YACtD,IAAI,wBAAwB,EAAE;gBAC5B,IAAI,CAAC,iCAAiC,CAAC,wBAAwB,CAAC,CAAA;aACjE;YAED,8GAA8G;YAC9G,kBAAkB,GAAG,IAAI,CAAC,8BAA8B,CAAC,wBAAwB,CAAC,CAAC,GAAG,CACpF,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,iBAAiB,CAAC,WAAW,CACvC,CAAA;SACF;QAED,MAAM,OAAO,GAAG,MAAA,MAAM,CAAC,OAAO,mCAAI,CAAC,MAAM,IAAI,CAAC,cAAc,CAAC,UAAU,CAAC,IAAI,CAAC,YAAY,EAAE,EAAE,CAAC,CAAC,CAAA;QAE/F,MAAM,QAAQ,GAAG,OAAO,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC,QAAQ,EAAE,KAAK,EAAE,EAAE;YACzD,OAAO,IAAI,iDAAuB,CAAC;gBACjC,EAAE,EAAE,WAAW,KAAK,EAAE;gBACtB,eAAe,EAAE,QAAQ;gBACzB,aAAa,EAAE,CAAC,OAAO,CAAC,YAAY,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,EAAE,EAAE,CAAC,IAAI,aAAM,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC;gBACvE,WAAW,EAAE,OAAO,CAAC,WAAW,CAAC,GAAG,CAAC,CAAC,GAAG,EAAE,EAAE,CAAC,IAAI,aAAM,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC;aACnE,CAAC,CAAA;QACJ,CAAC,CAAC,CAAA;QAEF,MAAM,OAAO,GAAG;YACd,KAAK;YACL,IAAI,EAAE,MAAM,CAAC,IAAI;YACjB,QAAQ,EAAE,MAAM,CAAC,QAAQ;YACzB,QAAQ;YACR,MAAM,EAAE,eAAe;YACvB,QAAQ;YACR,kBAAkB;YAClB,mBAAmB;SACpB,CAAA;QACD,MAAM,mBAAmB,GAAG,IAAI,8BAAmB,CAAC,OAAO,CAAC,CAAA;QAE5D,IAAI,QAAQ,EAAE;YACZ,QAAQ,CAAC,OAAO,CAAC,CAAC,OAAO,EAAE,EAAE;gBAC3B,IAAI,OAAO,CAAC,OAAO,EAAE;oBACnB,yGAAyG;oBACzG,OAAO,CAAC,OAAO,GAAG,SAAS,CAAA;iBAC5B;gBACD,mBAAmB,CAAC,UAAU,CAAC,OAAO,CAAC,CAAA;YACzC,CAAC,CAAC,CAAA;SACH;QAED,MAAM,eAAe,GAAG,IAAI,iCAAe,CAAC;YAC1C,UAAU,EAAE,OAAO,CAAC,UAAU;YAC9B,IAAI,EAAE,6BAAa,CAAC,MAAM;YAC1B,KAAK,EAAE,+BAAc,CAAC,aAAa;YACnC,KAAK,EAAE,MAAM,CAAC,KAAK;YACnB,mBAAmB,EAAE,mBAAmB;YACxC,QAAQ,EAAE,kBAAkB;YAC5B,oBAAoB;YACpB,IAAI,EAAE;gBACJ,wBAAwB,EAAE,QAAQ;qBAC/B,MAAM,CAAW,CAAC,IAAI,EAAE,EAAE,aAAa,EAAE,EAAE,EAAE,CAAC,CAAC,GAAG,IAAI,EAAE,GAAG,aAAa,CAAC,EAAE,EAAE,CAAC;qBAC9E,GAAG,CAAC,CAAC,MAAM,EAAE,EAAE,CAAC,aAAM,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,GAAG,CAAC,WAAW,CAAC;aAC3D;SACF,CAAC,CAAA;QAEF,MAAM,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,IAAI,CAAC,YAAY,EAAE,eAAe,CAAC,CAAA;QACpE,IAAI,CAAC,gBAAgB,CAAC,qBAAqB,CAAC,IAAI,CAAC,YAAY,EAAE,eAAe,EAAE,IAAI,CAAC,CAAA;QAErF,OAAO,eAAe,CAAA;IACxB,CAAC;IAED;;;;;;;;;OASG;IACI,KAAK,CAAC,sBAAsB,CAAC,SAAuC,EAAE;QAC3E,MAAM,eAAe,GAAG,MAAM,IAAI,CAAC,gBAAgB,iCAC9C,MAAM,KACT,kBAAkB,EAAE,CAAC,+BAAiB,CAAC,WAAW,CAAC,IACnD,CAAA;QAEF,6BAA6B;QAC7B,eAAe,CAAC,QAAQ,CAAC,GAAG,CAAC,0DAA2B,CAAC,gBAAgB,EAAE;YACzE,oBAAoB,EAAE,yBAAc,CAAC,UAAU;SAChD,CAAC,CAAA;QACF,MAAM,mBAAmB,GAAG,IAAI,CAAC,YAAY,CAAC,iBAAiB,CAAC,OAAO,CAAC,gCAAmB,CAAC,CAAA;QAC5F,MAAM,mBAAmB,CAAC,MAAM,CAAC,IAAI,CAAC,YAAY,EAAE,eAAe,CAAC,CAAA;QAEpE,OAAO,EAAE,eAAe,EAAE,UAAU,EAAE,IAAA,gCAAsB,EAAC,eAAe,CAAC,mBAAmB,CAAC,EAAE,CAAA;IACrG,CAAC;IAEM,KAAK,CAAC,oCAAoC,CAA+B,MAU/E;QACC,MAAM,eAAe,GAAG,MAAM,IAAI,CAAC,gBAAgB,CAAC;YAClD,QAAQ,EAAE,CAAC,MAAM,CAAC,OAAO,CAAC;YAC1B,OAAO,EAAE,MAAM,CAAC,OAAO;SACxB,CAAC,CAAA;QAEF,6BAA6B;QAC7B,eAAe,CAAC,QAAQ,CAAC,GAAG,CAAC,0DAA2B,CAAC,gBAAgB,EAAE;YACzE,oBAAoB,EAAE,yBAAc,CAAC,cAAc;SACpD,CAAC,CAAA;QACF,MAAM,mBAAmB,GAAG,IAAI,CAAC,YAAY,CAAC,iBAAiB,CAAC,OAAO,CAAC,gCAAmB,CAAC,CAAA;QAC5F,MAAM,mBAAmB,CAAC,MAAM,CAAC,IAAI,CAAC,YAAY,EAAE,eAAe,CAAC,CAAA;QAEpE,gDAAgD;QAChD,MAAM,eAAe,GAAG,MAAM,IAAI,CAAC,gBAAgB,CAAC,sCAAsC,CACxF,IAAI,CAAC,YAAY,EACjB,eAAe,CAAC,mBAAmB,CAAC,WAAW,EAAE,CAClD,CAAA;QACD,MAAM,CAAC,OAAO,CAAC,OAAO,GAAG,mCAAgB,CAAC,0BAA0B,CAAC,eAAe,CAAC,CAAA;QAErF,OAAO;YACL,OAAO,EAAE,MAAM,CAAC,OAAO;YACvB,aAAa,EAAE,GAAG,MAAM,CAAC,MAAM,QAAQ,mBAAW,CAAC,WAAW,CAAC,uBAAe,CAAC,MAAM,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC,EAAE;YACxG,eAAe;SAChB,CAAA;IACH,CAAC;IAED;;;;;;;;OAQG;IACI,KAAK,CAAC,wBAAwB,CAAC,aAAqB,EAAE,SAA2C,EAAE;QACxG,MAAM,OAAO,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,aAAa,CAAC,CAAA;QAEzD,OAAO,IAAI,CAAC,iBAAiB,CAAC,OAAO,EAAE,MAAM,CAAC,CAAA;IAChD,CAAC;IAED;;;;;;;;OAQG;IACI,KAAK,CAAC,eAAe,CAAC,aAAqB;QAChD,OAAO,IAAA,yCAAuB,EAAC,aAAa,EAAE,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC,iBAAiB,CAAC,CAAA;IAC3F,CAAC;IAED;;;;;;;;;;;;;;;;OAgBG;IACI,KAAK,CAAC,iBAAiB,CAC5B,UAA6D,EAC7D,SAA2C,EAAE;QAE7C,OAAO,IAAI,CAAC,kBAAkB,CAAC,UAAU,EAAE,MAAM,CAAC,CAAA;IACpD,CAAC;IAED;;;;;;;;;;;;;;;;OAgBG;IACI,KAAK,CAAC,yBAAyB,CAAC,MAAgD;;QACrF,MAAM,kBAAkB,GAAG,IAAI,CAAC,8BAA8B,CAC5D,MAAA,MAAM,CAAC,kBAAkB,mCAAI,CAAC,+BAAiB,CAAC,WAAW,CAAC,CAC7D,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,iBAAiB,CAAC,WAAW,CAAC,CAAA;QAE7C,MAAM,UAAU,GAAG,IAAI,8BAAmB,CAAC;YACzC,EAAE,EAAE,MAAM,CAAC,GAAG;YACd,KAAK,EAAE,MAAA,MAAM,CAAC,KAAK,mCAAI,EAAE;YACzB,QAAQ,EAAE,CAAC,MAAM,CAAC,GAAG,CAAC;YACtB,kBAAkB;SACnB,CAAC,CAAA;QAEF,OAAO,IAAI,CAAC,kBAAkB,CAAC,UAAU,kCAAO,MAAM,KAAE,UAAU,EAAE,IAAI,IAAG,CAAA;IAC7E,CAAC;IAED;;OAEG;IACK,KAAK,CAAC,kBAAkB,CAC9B,UAA6D,EAC7D,SAA+C,EAAE;;QAEjD,8CAA8C;QAC9C,MAAM,mBAAmB,GACvB,UAAU,YAAY,8BAAmB,CAAC,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC,IAAA,gCAAsB,EAAC,UAAU,CAAC,CAAA;QAE7F,MAAM,EAAE,kBAAkB,EAAE,GAAG,mBAAmB,CAAA;QAClD,MAAM,EAAE,OAAO,EAAE,GAAG,MAAM,CAAA;QAE1B,MAAM,oBAAoB,GAAG,MAAA,MAAM,CAAC,oBAAoB,mCAAI,IAAI,CAAA;QAChE,MAAM,oBAAoB,GAAG,MAAA,MAAM,CAAC,oBAAoB,mCAAI,IAAI,CAAA;QAChE,MAAM,eAAe,GAAG,MAAA,MAAM,CAAC,eAAe,mCAAI,KAAK,CAAA;QACvD,MAAM,KAAK,GAAG,MAAA,MAAM,CAAC,KAAK,mCAAI,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC,KAAK,CAAA;QAC5D,MAAM,KAAK,GAAG,MAAM,CAAC,KAAK,CAAA;QAC1B,MAAM,QAAQ,GAAG,MAAA,MAAM,CAAC,QAAQ,mCAAI,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC,kBAAkB,CAAA;QAE/E,MAAM,QAAQ,GAAG,mBAAmB,CAAC,WAAW,EAAE,CAAA;QAElD,MAAM,gBAAgB,GAAG,kBAAkB,KAAK,SAAS,IAAI,kBAAkB,CAAC,MAAM,KAAK,CAAC,CAAA;QAE5F,IAAI,CAAC,CAAC,kBAAkB,IAAI,kBAAkB,CAAC,MAAM,KAAK,CAAC,CAAC,IAAI,CAAC,CAAC,QAAQ,IAAI,CAAA,QAAQ,aAAR,QAAQ,uBAAR,QAAQ,CAAE,MAAM,MAAK,CAAC,CAAC,EAAE;YACrG,MAAM,IAAI,kBAAU,CAAC,yFAAyF,CAAC,CAAA;SAChH;QAED,uDAAuD;QACvD,gGAAgG;QAChG,0EAA0E;QAC1E,IAAI,CAAC,MAAM,CAAC,UAAU,EAAE;YACtB,MAAM,4BAA4B,GAAG,MAAM,IAAI,CAAC,gBAAgB,CAAC,cAAc,CAAC,IAAI,CAAC,YAAY,EAAE;gBACjG,YAAY,EAAE,mBAAmB,CAAC,EAAE;gBACpC,IAAI,EAAE,6BAAa,CAAC,QAAQ;aAC7B,CAAC,CAAA;YACF,IAAI,4BAA4B,CAAC,MAAM,GAAG,CAAC,EAAE;gBAC3C,MAAM,IAAI,kBAAU,CAClB,yCAAyC,mBAAmB,CAAC,EAAE,kEAAkE,CAClI,CAAA;aACF;SACF;QAED,MAAM,wBAAwB,GAAa,EAAE,CAAA;QAC7C,KAAK,MAAM,OAAO,IAAI,mBAAmB,CAAC,WAAW,EAAE,EAAE;YACvD,+CAA+C;YAC/C,IAAI,OAAO,OAAO,KAAK,QAAQ,EAAE;gBAC/B,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,8BAA8B,OAAO,GAAG,CAAC,CAAA;gBAC3D,MAAM,uBAAuB,GAAG,MAAM,IAAI,CAAC,sBAAsB,CAAC,sBAAsB,CACtF,IAAI,CAAC,YAAY,EACjB,OAAO,CACR,CAAA;gBACD,wBAAwB,CAAC,IAAI,CAC3B,GAAG,uBAAuB;qBACvB,MAAM,CAAQ,CAAC,IAAI,EAAE,EAAE,aAAa,EAAE,EAAE,EAAE,CAAC,CAAC,GAAG,IAAI,EAAE,GAAG,aAAa,CAAC,EAAE,EAAE,CAAC;qBAC3E,GAAG,CAAC,CAAC,GAAG,EAAE,EAAE,CAAC,GAAG,CAAC,WAAW,CAAC,CACjC,CAAA;aACF;iBAAM;gBACL,wBAAwB,CAAC,IAAI,CAAC,GAAG,OAAO,CAAC,aAAa,CAAC,GAAG,CAAC,CAAC,MAAM,EAAE,EAAE,CAAC,aAAM,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,GAAG,CAAC,WAAW,CAAC,CAAC,CAAA;aAChH;SACF;QAED,MAAM,eAAe,GAAG,IAAI,iCAAe,CAAC;YAC1C,IAAI,EAAE,6BAAa,CAAC,QAAQ;YAC5B,KAAK,EAAE,+BAAc,CAAC,OAAO;YAC7B,mBAAmB,EAAE,mBAAmB;YACxC,oBAAoB;YACpB,IAAI,EAAE,EAAE,wBAAwB,EAAE;YAClC,UAAU,EAAE,OAAO,aAAP,OAAO,uBAAP,OAAO,CAAE,UAAU;SAChC,CAAC,CAAA;QAEF,yGAAyG;QACzG,gHAAgH;QAChH,IAAI,OAAO,IAAI,CAAC,gBAAgB,IAAI,CAAC,oBAAoB,CAAC,EAAE;YAC1D,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,6CAA6C,CAAC,CAAA;YAChE,eAAe,CAAC,QAAQ,CAAC,GAAG,CAAC,0DAA2B,CAAC,gBAAgB,EAAE;gBACzE,uBAAuB,EAAE,OAAO,CAAC,YAAY,CAAC,WAAW;gBACzD,sBAAsB,EAAE,OAAO,CAAC,WAAW,CAAC,GAAG,CAAC,CAAC,GAAG,EAAE,EAAE,CAAC,GAAG,CAAC,WAAW,CAAC;gBACzE,SAAS,EAAE,OAAO,CAAC,SAAS;gBAC5B,UAAU,EAAE,OAAO,CAAC,UAAU;aAC/B,CAAC,CAAA;SACH;QAED,0GAA0G;QAC1G,IAAI,mBAAmB,CAAC,cAAc,IAAI,mBAAmB,CAAC,cAAc,KAAK,yBAAc,CAAC,SAAS,EAAE;YACzG,eAAe,CAAC,QAAQ,CAAC,GAAG,CAAC,0DAA2B,CAAC,gBAAgB,EAAE;gBACzE,oBAAoB,EAAE,mBAAmB,CAAC,cAAc;aACzD,CAAC,CAAA;SACH;QAED,MAAM,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,IAAI,CAAC,YAAY,EAAE,eAAe,CAAC,CAAA;QACpE,IAAI,CAAC,gBAAgB,CAAC,qBAAqB,CAAC,IAAI,CAAC,YAAY,EAAE,eAAe,EAAE,IAAI,CAAC,CAAA;QAErF,IAAI,oBAAoB,EAAE;YACxB,OAAO,MAAM,IAAI,CAAC,gBAAgB,CAAC,eAAe,CAAC,EAAE,EAAE;gBACrD,KAAK;gBACL,KAAK;gBACL,QAAQ;gBACR,oBAAoB;gBACpB,eAAe;gBACf,OAAO;gBACP,SAAS,EAAE,MAAM,CAAC,yBAAyB;gBAC3C,MAAM,EAAE,MAAM,CAAC,MAAM;aACtB,CAAC,CAAA;SACH;QAED,OAAO,EAAE,eAAe,EAAE,CAAA;IAC5B,CAAC;IAED;;;;;;;;;;;;;OAaG;IACI,KAAK,CAAC,gBAAgB,CAC3B,WAAmB,EACnB,MAcC;;QAED,MAAM,eAAe,GAAG,MAAM,IAAI,CAAC,gBAAgB,CAAC,OAAO,CAAC,IAAI,CAAC,YAAY,EAAE,WAAW,CAAC,CAAA;QAE3F,MAAM,EAAE,mBAAmB,EAAE,GAAG,eAAe,CAAA;QAC/C,MAAM,EAAE,KAAK,EAAE,KAAK,EAAE,QAAQ,EAAE,oBAAoB,EAAE,eAAe,EAAE,MAAM,EAAE,GAAG,MAAM,CAAA;QACxF,MAAM,QAAQ,GAAG,mBAAmB,CAAC,WAAW,EAAE,CAAA;QAClD,MAAM,QAAQ,GAAG,mBAAmB,CAAC,WAAW,EAAE,CAAA;QAClD,MAAM,SAAS,GAAG,MAAA,MAAM,CAAC,SAAS,mCAAI,KAAK,CAAA;QAE3C,IAAI,OAAO,GAAG,MAAM,CAAC,OAAO,CAAA;QAE5B,uDAAuD;QACvD,MAAM,gBAAgB,GAAG,eAAe,CAAC,QAAQ,CAAC,GAAG,CAAC,0DAA2B,CAAC,gBAAgB,CAAC,CAAA;QACnG,IAAI,CAAC,OAAO,IAAI,gBAAgB,EAAE;YAChC,OAAO,GAAG;gBACR,YAAY,EAAE,YAAG,CAAC,eAAe,CAAC,gBAAgB,CAAC,uBAAuB,CAAC;gBAC3E,WAAW,EAAE,gBAAgB,CAAC,sBAAsB,CAAC,GAAG,CAAC,CAAC,WAAW,EAAE,EAAE,CAAC,YAAG,CAAC,eAAe,CAAC,WAAW,CAAC,CAAC;gBAC3G,SAAS,EAAE,gBAAgB,CAAC,SAAS;gBACrC,UAAU,EAAE,gBAAgB,CAAC,UAAU;aACxC,CAAA;SACF;QAED,MAAM,EAAE,kBAAkB,EAAE,GAAG,mBAAmB,CAAA;QAElD,MAAM,kBAAkB,GAAG,MAAM,IAAI,CAAC,sBAAsB,CAAC,mBAAmB,CAAC,CAAA;QAEjF,MAAM,IAAI,CAAC,gBAAgB,CAAC,WAAW,CAAC,IAAI,CAAC,YAAY,EAAE,eAAe,EAAE,+BAAc,CAAC,eAAe,CAAC,CAAA;QAE3G,IAAI,kBAAkB,EAAE;YACtB,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,mDAAmD,CAAC,CAAA;YAEtE,IAAI,gBAAgB,CAAA;YACpB,IAAI,kBAAkB,IAAI,eAAe,EAAE;gBACzC,IAAI,CAAC,MAAM,CAAC,KAAK,CACf,0FAA0F,kBAAkB,CAAC,EAAE,GAAG,CACnH,CAAA;gBAED,IAAI,CAAC,QAAQ,EAAE;oBACb,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,4DAA4D,CAAC,CAAA;oBAC/E,MAAM,0BAA0B,GAAG,MAAM,IAAI,CAAC,oBAAoB,CAAC,eAAe,EAAE,kBAAkB,CAAC,CAAA;oBAEvG,iCAAiC;oBACjC,IAAI,0BAA0B,EAAE;wBAC9B,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,2DAA2D,kBAAkB,CAAC,EAAE,GAAG,CAAC,CAAA;wBACtG,gBAAgB,GAAG,kBAAkB,CAAA;qBACtC;yBAAM;wBACL,wDAAwD;wBACxD,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,yDAAyD,kBAAkB,CAAC,EAAE,GAAG,CAAC,CAAA;qBACrG;iBACF;qBAAM;oBACL,2FAA2F;oBAC3F,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,+BAA+B,kBAAkB,CAAC,EAAE,GAAG,CAAC,CAAA;oBAC1E,gBAAgB,GAAG,kBAAkB,CAAA;iBACtC;aACF;YAED,wFAAwF;YACxF,8DAA8D;YAC9D,IAAI,CAAC,gBAAgB,EAAE;gBACrB,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,4EAA4E,CAAC,CAAA;gBAC/F,sFAAsF;gBACtF,uEAAuE;gBACvE,MAAM,sBAAsB,GAAG,IAAI,CAAC,yBAAyB,CAAC,kBAAkB,CAAC,CAAA;gBACjF,gBAAgB,GAAG,MAAM,IAAI,CAAC,cAAc,CAAC,yBAAyB,CAAC,eAAe,EAAE;oBACtF,KAAK;oBACL,KAAK;oBACL,QAAQ;oBACR,oBAAoB;oBACpB,QAAQ,EAAE,sBAAsB,CAAC,iBAAiB;oBAClD,OAAO;oBACP,MAAM;iBACP,CAAC,CAAA;aACH;YAED,IAAI,QAAQ,EAAE;gBACZ,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,gDAAgD,CAAC,CAAA;gBACnE,IAAI,gBAAgB,CAAC,OAAO,EAAE;oBAC5B,MAAM,IAAI,CAAC,kBAAkB,CAAC,eAAe,EAAE,gBAAgB,EAAE,QAAQ,CAAC,CAAA;iBAC3E;qBAAM;oBACL,oGAAoG;oBACpG,IAAI,CAAC,cAAc;yBAChB,qBAAqB,CAAC,gBAAgB,CAAC,EAAE,EAAE,EAAE,SAAS,EAAE,CAAC;yBACzD,IAAI,CAAC,CAAC,gBAAgB,EAAE,EAAE,CAAC,IAAI,CAAC,kBAAkB,CAAC,eAAe,EAAE,gBAAgB,EAAE,QAAQ,CAAC,CAAC;yBAChG,KAAK,CAAC,CAAC,KAAK,EAAE,EAAE;wBACf,IAAI,KAAK,YAAY,iBAAU,EAAE;4BAC/B,IAAI,CAAC,MAAM,CAAC,IAAI,CACd,iDAAiD,8BAAgB,CAAC,SAAS,QAAQ,EACnF,KAAK,CACN,CAAA;yBACF;6BAAM;4BACL,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,2DAA2D,EAAE,KAAK,CAAC,CAAA;yBACtF;oBACH,CAAC,CAAC,CAAA;iBACL;aACF;YACD,OAAO,EAAE,eAAe,EAAE,gBAAgB,EAAE,CAAA;SAC7C;aAAM,IAAI,QAAQ,EAAE;YACnB,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,qDAAqD,CAAC,CAAA;YACxE,IAAI,kBAAkB,EAAE;gBACtB,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,4BAA4B,EAAE,EAAE,YAAY,EAAE,kBAAkB,CAAC,EAAE,EAAE,CAAC,CAAA;gBACxF,MAAM,IAAI,CAAC,kBAAkB,CAAC,eAAe,EAAE,kBAAkB,EAAE,QAAQ,CAAC,CAAA;aAC7E;iBAAM;gBACL,MAAM,IAAI,CAAC,gBAAgB,CAAC,eAAe,EAAE,QAAQ,EAAE,QAAQ,CAAC,CAAA;aACjE;SACF;QACD,OAAO,EAAE,eAAe,EAAE,CAAA;IAC5B,CAAC;IAEM,KAAK,CAAC,0BAA0B,CAAC,oBAA4B;QAClE,OAAO,IAAI,CAAC,gBAAgB,CAAC,0BAA0B,CAAC,IAAI,CAAC,YAAY,EAAE,oBAAoB,CAAC,CAAA;IAClG,CAAC;IAEM,KAAK,CAAC,yBAAyB,CAAC,mBAA2B;QAChE,OAAO,IAAI,CAAC,gBAAgB,CAAC,yBAAyB,CAAC,IAAI,CAAC,YAAY,EAAE,mBAAmB,CAAC,CAAA;IAChG,CAAC;IAED;;;;OAIG;IACI,MAAM;QACX,OAAO,IAAI,CAAC,gBAAgB,CAAC,MAAM,CAAC,IAAI,CAAC,YAAY,CAAC,CAAA;IACxD,CAAC;IAED;;;;OAIG;IACI,cAAc,CAAC,KAA6B;QACjD,OAAO,IAAI,CAAC,gBAAgB,CAAC,cAAc,CAAC,IAAI,CAAC,YAAY,EAAE,KAAK,CAAC,CAAA;IACvE,CAAC;IAED;;;;;;;OAOG;IACI,OAAO,CAAC,WAAmB;QAChC,OAAO,IAAI,CAAC,gBAAgB,CAAC,OAAO,CAAC,IAAI,CAAC,YAAY,EAAE,WAAW,CAAC,CAAA;IACtE,CAAC;IAED;;;;;OAKG;IACI,QAAQ,CAAC,WAAmB;QACjC,OAAO,IAAI,CAAC,gBAAgB,CAAC,QAAQ,CAAC,IAAI,CAAC,YAAY,EAAE,WAAW,CAAC,CAAA;IACvE,CAAC;IAED;;;;OAIG;IACI,KAAK,CAAC,UAAU,CAAC,WAAmB;QACzC,MAAM,eAAe,GAAG,MAAM,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,CAAA;QAEvD,MAAM,kBAAkB,GAAG,MAAM,IAAI,CAAC,cAAc,CAAC,oBAAoB,CAAC,WAAW,CAAC,CAAA;QAEtF,kGAAkG;QAClG,iGAAiG;QACjG,oCAAoC;QACpC,IAAI,eAAe,CAAC,UAAU,IAAI,CAAC,kBAAkB,CAAC,MAAM,KAAK,CAAC,IAAI,eAAe,CAAC,QAAQ,CAAC,EAAE;YAC/F,MAAM,aAAa,GAAG,eAAe,CAAC,OAAO,EAAE,CAAC,wBAAwB,CAAC,GAAG,CAAC,CAAC,IAAI,EAAE,EAAE,CAAC,YAAG,CAAC,eAAe,CAAC,IAAI,CAAC,CAAC,CAAA;YAEjH,MAAM,IAAI,CAAC,cAAc,CAAC,aAAa,CAAC,IAAI,CAAC,YAAY,EAAE;gBACzD,aAAa;gBACb,UAAU,EAAE,eAAe,CAAC,UAAU;aACvC,CAAC,CAAA;SACH;QAED,OAAO,IAAI,CAAC,gBAAgB,CAAC,UAAU,CAAC,IAAI,CAAC,YAAY,EAAE,WAAW,CAAC,CAAA;IACzE,CAAC;IAEO,iCAAiC,CAAC,kBAAuC;QAC/E,IAAI,CAAC,IAAI,CAAC,8BAA8B,CAAC,kBAAkB,CAAC,EAAE;YAC5D,MAAM,kBAAkB,GAAG,IAAI,CAAC,8BAA8B,EAAE,CAAA;YAChE,MAAM,IAAI,kBAAU,CAClB,wBAAwB,kBAAkB,iDAAiD,kBAAkB,GAAG,CACjH,CAAA;SACF;IACH,CAAC;IAEO,8BAA8B,CAAC,kBAAuC;QAC5E,MAAM,kBAAkB,GAAG,IAAI,CAAC,8BAA8B,CAAC,kBAAkB,CAAC,CAAA;QAClF,OAAO,kBAAkB,CAAC,MAAM,KAAK,kBAAkB,CAAC,MAAM,CAAA;IAChE,CAAC;IAEO,8BAA8B,CAAC,yBAA+C;QACpF,MAAM,qBAAqB,GAAG,yBAAyB,aAAzB,yBAAyB,cAAzB,yBAAyB,GAAI,MAAM,CAAC,MAAM,CAAC,+BAAiB,CAAC,CAAA;QAE3F,wEAAwE;QACxE,MAAM,2BAA2B,GAAG,qBAAqB,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC;YACpE,iBAAiB,EAAE,CAAC;YACpB,iBAAiB,EAAE,IAAA,qCAAuB,EAAC,CAAC,CAAC,OAAO,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;SAClE,CAAC,CAAC,CAAA;QAEH,wIAAwI;QACxI,MAAM,2BAA2B,GAAG,IAAI,CAAC,sBAAsB,CAAC,sCAAsC,CACpG,2BAA2B,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,iBAAiB,CAAC,CAC5D,CAAA;QAED,IAAI,2BAA2B,CAAC,MAAM,KAAK,CAAC,EAAE;YAC5C,MAAM,IAAI,kBAAU,CAAC,8EAA8E,CAAC,CAAA;SACrG;QAED,yFAAyF;QACzF,MAAM,gBAAgB,GAAG,2BAA2B;aACjD,GAAG,CAAC,CAAC,CAAC,EAAE,EAAE;YACT,MAAM,KAAK,GAAG,2BAA2B,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,EAAE,CACnD,IAAA,gDAAkC,EAAC,CAAC,EAAE,CAAC,CAAC,iBAAiB,CAAC,CAC3D,CAAA;YACD,oHAAoH;YACpH,8GAA8G;YAC9G,OAAO,KAAK,CAAC,CAAC,iCAAM,CAAC,KAAE,iBAAiB,EAAE,KAAK,IAAG,CAAC,CAAC,IAAI,CAAA;QAC1D,CAAC,CAAC;aACD,MAAM,CAAC,CAAC,CAAC,EAA8B,EAAE,CAAC,CAAC,KAAK,IAAI,CAAC,CAAA;QAExD,OAAO,gBAAgB,CAAA;IACzB,CAAC;IAED;;;;;;;;OAQG;IACK,yBAAyB,CAAC,YAAsB;QACtD,MAAM,kBAAkB,GAAG,IAAI,CAAC,8BAA8B,EAAE,CAAA;QAChE,MAAM,kBAAkB,GAAG,YAAY,CAAC,GAAG,CAAC,qCAAuB,CAAC,CAAA;QAEpE,MAAM,sBAAsB,GAAG,kBAAkB,CAAC,IAAI,CAAC,CAAC,iBAAiB,EAAE,EAAE,CAC3E,kBAAkB,CAAC,IAAI,CAAC,CAAC,cAAc,EAAE,EAAE,CACzC,IAAA,gDAAkC,EAAC,iBAAiB,CAAC,iBAAiB,EAAE,cAAc,CAAC,CACxF,CACF,CAAA;QAED,IAAI,CAAC,sBAAsB,EAAE;YAC3B,MAAM,IAAI,kBAAU,CAClB,wBAAwB,YAAY,iDAAiD,kBAAkB,CAAC,GAAG,CACzG,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,iBAAiB,CAC3B,GAAG,CACL,CAAA;SACF;QAED,OAAO,sBAAsB,CAAA;IAC/B,CAAC;IAEO,KAAK,CAAC,sBAAsB,CAAC,mBAAwC;QAC3E,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,kEAAkE,EAAE,EAAE,mBAAmB,EAAE,CAAC,CAAA;QAE9G,KAAK,MAAM,aAAa,IAAI,mBAAmB,CAAC,cAAc,EAAE;YAC9D,MAAM,WAAW,GAAG,MAAM,IAAI,CAAC,cAAc,CAAC,mBAAmB,CAAC,aAAa,CAAC,CAAA;YAChF,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,aAAa,WAAW,CAAC,MAAM,mCAAmC,aAAa,EAAE,CAAC,CAAA;YAEpG,IAAI,WAAW,CAAC,MAAM,KAAK,CAAC,EAAE;gBAC5B,MAAM,CAAC,eAAe,CAAC,GAAG,WAAW,CAAA;gBACrC,OAAO,eAAe,CAAA;aACvB;iBAAM,IAAI,WAAW,CAAC,MAAM,GAAG,CAAC,EAAE;gBACjC,IAAI,CAAC,MAAM,CAAC,IAAI,CACd,gEAAgE,aAAa,yBAAyB,CACvG,CAAA;gBACD,MAAM,CAAC,eAAe,CAAC,GAAG,WAAW,CAAA;gBACrC,OAAO,eAAe,CAAA;aACvB;YACD,OAAO,IAAI,CAAA;SACZ;IACH,CAAC;IAEO,KAAK,CAAC,kBAAkB,CAC9B,eAAgC,EAChC,gBAAkC,EAClC,QAA4B;QAE5B,MAAM,qBAAqB,GAAG,IAAI,CAAC,sBAAsB,CAAC,qBAAqB,CAAA;QAC/E,MAAM,gBAAgB,GAAG,QAAQ,CAAC,IAAI,CAAC,CAAC,OAAO,EAAE,EAAE;YACjD,MAAM,iBAAiB,GAAG,IAAA,8BAAgB,EAAC,OAAO,CAAC,OAAO,CAAC,CAAC,CAAA;YAC5D,OAAO,qBAAqB,CAAC,IAAI,CAAC,CAAC,IAAI,EAAE,EAAE,CAAC,IAAA,yCAA2B,EAAC,iBAAiB,EAAE,IAAI,CAAC,CAAC,CAAA;QACnG,CAAC,CAAC,CAAA;QAEF,IAAI,CAAC,gBAAgB,EAAE;YACrB,MAAM,IAAI,kBAAU,CAAC,4DAA4D,CAAC,CAAA;SACnF;QAED,iDAAiD;QACjD,IAAI,CAAC,oBAAoB,CAAC,eAAe,EAAE,gBAAgB,CAAC,CAAA;QAE5D,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,qBAAqB,gBAAgB,CAAC,OAAO,CAAC,oBAAoB,CAAC,CAAA;QAErF,IAAI,CAAC,YAAY,CAAC,IAAI,CAA4B,IAAI,CAAC,YAAY,EAAE;YACnE,IAAI,EAAE,wBAAe,CAAC,oBAAoB;YAC1C,OAAO,EAAE;gBACP,OAAO,EAAE,gBAAgB;gBACzB,UAAU,EAAE,gBAAgB;gBAC5B,oBAAoB,EAAE,IAAI,CAAC,YAAY,CAAC,oBAAoB;aAC7D;SACF,CAAC,CAAA;IACJ,CAAC;IAEO,KAAK,CAAC,gBAAgB,CAC5B,eAAgC,EAChC,QAAiD,EACjD,QAA4B;QAE5B,IAAI,CAAC,QAAQ,IAAI,QAAQ,CAAC,MAAM,KAAK,CAAC,EAAE;YACtC,MAAM,IAAI,kBAAU,CAAC,iDAAiD,CAAC,CAAA;SACxE;QAED,MAAM,qBAAqB,GAAG,IAAI,CAAC,sBAAsB,CAAC,qBAAqB,CAAA;QAC/E,MAAM,gBAAgB,GAAG,QAAQ,CAAC,IAAI,CAAC,CAAC,OAAO,EAAE,EAAE;YACjD,MAAM,iBAAiB,GAAG,IAAA,8BAAgB,EAAC,OAAO,CAAC,OAAO,CAAC,CAAC,CAAA;YAC5D,OAAO,qBAAqB,CAAC,IAAI,CAAC,CAAC,IAAI,EAAE,EAAE,CAAC,IAAA,yCAA2B,EAAC,iBAAiB,EAAE,IAAI,CAAC,CAAC,CAAA;QACnG,CAAC,CAAC,CAAA;QAEF,IAAI,CAAC,gBAAgB,EAAE;YACrB,MAAM,IAAI,kBAAU,CAAC,4DAA4D,CAAC,CAAA;SACnF;QAED,iDAAiD;QACjD,IAAI,CAAC,oBAAoB,CAAC,eAAe,EAAE,gBAAgB,CAAC,CAAA;QAE5D,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,qBAAqB,gBAAgB,CAAC,OAAO,CAAC,oBAAoB,CAAC,CAAA;QAErF,IAAI,CAAC,YAAY,CAAC,IAAI,CAA4B,IAAI,CAAC,YAAY,EAAE;YACnE,IAAI,EAAE,wBAAe,CAAC,oBAAoB;YAC1C,OAAO,EAAE;gBACP,OAAO,EAAE,gBAAgB;gBACzB,oBAAoB,EAAE,IAAI,CAAC,YAAY,CAAC,oBAAoB;aAC7D;SACF,CAAC,CAAA;IACJ,CAAC;IAEO,oBAAoB,CAAC,eAAgC,EAAE,gBAAkC;;QAC/F,MAAM,wBAAwB,GAAG,eAAe,CAAC,QAAQ,CAAC,GAAG,CAAC,0DAA2B,CAAC,gBAAgB,CAAC,CAAA;QAE3G,mFAAmF;QACnF,8FAA8F;QAC9F,IACE,CAAA,MAAA,gBAAgB,CAAC,SAAS,CAAC,0CAAE,KAAK;YAClC,gBAAgB,CAAC,SAAS,CAAC,CAAC,KAAK,KAAK,eAAe,CAAC,mBAAmB,CAAC,EAAE,EAC5E;YACA,MAAM,IAAI,kBAAU,CAClB,4EAA4E,gBAAgB,CAAC,SAAS,CAAC,CAAC,KAAK,0CAA0C,eAAe,CAAC,mBAAmB,CAAC,EAAE,EAAE,CAChM,CAAA;SACF;QAED,uGAAuG;QACvG,8DAA8D;QAC9D,IAAI,CAAA,wBAAwB,aAAxB,wBAAwB,uBAAxB,wBAAwB,CAAE,oBAAoB,MAAK,yBAAc,CAAC,cAAc,EAAE;YACpF,OAAM;SACP;QAED,IAAI,CAAC,gBAAgB,CAAC,SAAS,CAAC,EAAE;YAChC,gBAAgB,CAAC,SAAS,CAAC,GAAG,EAAE,CAAA;SACjC;QAED,0HAA0H;QAC1H,4FAA4F;QAC5F,gBAAgB,CAAC,SAAS,CAAC,CAAC,KAAK,GAAG,eAAe,CAAC,mBAAmB,CAAC,EAAE,CAAA;IAC5E,CAAC;IAEO,KAAK,CAAC,oBAAoB,CAAC,eAAgC,EAAE,gBAAkC;QACrG,MAAM,YAAY,GAAG,MAAM,IAAI,CAAC,gBAAgB,CAAC,oBAAoB,CACnE,IAAI,CAAC,YAAY,EACjB,eAAe,EACf,gBAAgB,CACjB,CAAA;QAED,MAAM,yBAAyB,GAAG,IAAA,qBAAc,EAC9C,IAAI,CAAC,YAAY,CAAC,UAAU,CAAuB,qCAAmB,CAAC,eAAe,CAAC,CAAC,IAAI,CAC1F,IAAA,mCAA0B,EAAC,IAAI,CAAC,YAAY,CAAC,oBAAoB,CAAC;QAClE,iGAAiG;QACjG,gFAAgF;QAChF,IAAA,YAAK,EACH,CAAC,KAAK,EAAE,EAAE,CACR,KAAK,CAAC,OAAO,CAAC,aAAa,KAAK,YAAY,CAAC,QAAQ;YACrD,KAAK,CAAC,OAAO,CAAC,eAAe,CAAC,EAAE,KAAK,eAAe,CAAC,EAAE;YACvD,KAAK,CAAC,OAAO,CAAC,gBAAgB,CAAC,EAAE,KAAK,gBAAgB,CAAC,EAAE,CAC5D;QACD,kDAAkD;QAClD,IAAA,UAAG,EAAC,GAAG,EAAE,CAAC,IAAI,CAAC,EACf,IAAA,cAAO,EAAC;YACN,KAAK,EAAE,KAAK;YACZ,IAAI,EAAE,mCAAmC;SAC1C,CAAC;QACF,yCAAyC;QACzC,IAAA,iBAAU,EAAC,GAAG,EAAE,CAAC,IAAA,SAAE,EAAC,KAAK,CAAC,CAAC,CAC5B,CACF,CAAA;QAED,MAAM,sBAAsB,GAAG,IAAI,+BAAsB,CAAC,YAAY,EAAE;YACtE,YAAY,EAAE,IAAI,CAAC,YAAY;YAC/B,UAAU,EAAE,gBAAgB;SAC7B,CAAC,CAAA;QACF,MAAM,IAAI,CAAC,aAAa,CAAC,WAAW,CAAC,sBAAsB,CAAC,CAAA;QAE5D,OAAO,yBAAyB,CAAA;IAClC,CAAC;IAED,+FAA+F;IACvF,uBAAuB,CAAC,sBAA8C;QAC5E,sBAAsB,CAAC,sBAAsB,CAAC,IAAI,gCAAqB,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAC,CAAA;QAC/F,sBAAsB,CAAC,sBAAsB,CAAC,IAAI,6DAA6B,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAC,CAAA;IACzG,CAAC;CACF,CAAA;AA50BY,YAAY;IADxB,IAAA,oBAAU,GAAE;IAoBR,WAAA,IAAA,gBAAM,EAAC,4BAAgB,CAAC,MAAM,CAAC,CAAA;qCAPR,+CAAsB;QACtB,gCAAsB;QAC5B,mCAAgB;QAClB,+BAAc;QACd,4BAAc;QACf,6BAAa;QACd,2BAAY,UAEZ,oBAAY;GApBjB,YAAY,CA40BxB;AA50BY,oCAAY"}
\ No newline at end of file
+{"version":3,"file":"OutOfBandApi.js","sourceRoot":"","sources":["../../../src/modules/oob/OutOfBandApi.ts"],"names":[],"mappings":"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"}
\ No newline at end of file
diff --git a/node_modules/@credo-ts/core/build/modules/routing/messages/ForwardMessage.d.ts b/node_modules/@credo-ts/core/build/modules/routing/messages/ForwardMessage.d.ts
index 396f78a..4f8577b 100644
--- a/node_modules/@credo-ts/core/build/modules/routing/messages/ForwardMessage.d.ts
+++ b/node_modules/@credo-ts/core/build/modules/routing/messages/ForwardMessage.d.ts
@@ -3,7 +3,6 @@ import { EncryptedMessage } from '../../../types';
 export interface ForwardMessageOptions {
     id?: string;
     to: string;
-    messageType: string;
     message: EncryptedMessage;
 }
 /**
@@ -20,6 +19,5 @@ export declare class ForwardMessage extends AgentMessage {
     readonly type: string;
     static readonly type: import("../../../utils/messageType").ParsedMessageType;
     to: string;
-    messageType: string;
     message: EncryptedMessage;
 }
diff --git a/node_modules/@credo-ts/core/build/types.d.ts b/node_modules/@credo-ts/core/build/types.d.ts
index 0a669fb..e0384d9 100644
--- a/node_modules/@credo-ts/core/build/types.d.ts
+++ b/node_modules/@credo-ts/core/build/types.d.ts
@@ -81,7 +81,6 @@ export interface PlaintextMessage {
         thid?: string;
         pthid?: string;
     };
-    messageType: string;
     [key: string]: unknown;
 }
 export interface OutboundPackage {